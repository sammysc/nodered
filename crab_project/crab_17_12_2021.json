[{"id":"b2123574.936d08","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"6267b9e6.8530b8","type":"tab","label":"Crab","disabled":false,"info":""},{"id":"e428c615.0e1c58","type":"tab","label":"Crab_Alertas_Pack","disabled":false,"info":""},{"id":"74bcfb9a.3ad194","type":"tab","label":"Dados_Utilidades","disabled":false,"info":""},{"id":"9a9a7718.e7e1a8","type":"tab","label":"Dados_Processo","disabled":false,"info":""},{"id":"8e05a758.3df478","type":"influxdb","hostname":"10.205.20.230","port":"8086","protocol":"http","database":"papude","name":"","usetls":false,"tls":""},{"id":"deaad6f1.14bb58","type":"influxdb","hostname":"10.205.20.230","port":"8086","protocol":"http","database":"mydb","name":"","usetls":false,"tls":""},{"id":"ab58ea9b.d32e98","type":"telegram bot","botname":"CRAB","usernames":"","chatids":"","baseapiurl":"https://api.telegram.org","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"443","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":true},{"id":"e85b9233.42aef","type":"influxdb","hostname":"10.205.20.230","port":"8086","protocol":"http","database":"mydb","name":"","usetls":false,"tls":""},{"id":"879db677.070ba8","type":"telegram bot","botname":"Crab_Alertas ","usernames":"","chatids":"","baseapiurl":"https://api.telegram.org","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"6a3791d9.8825f","type":"influxdb","hostname":"10.206.15.2","port":"8086","protocol":"http","database":"mydb","name":"","usetls":false,"tls":""},{"id":"23462907.3b7c56","type":"telegram bot","botname":"Alerts","usernames":"","chatids":"-796510825","baseapiurl":"https://api.telegram.org","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"6991af64.21add","type":"telegram bot","botname":"Crab_Filtração","usernames":"-515574294","chatids":"","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"6f91a72f.689968","type":"comment","z":"b2123574.936d08","name":"WARNING: please check you have started this container with a volume that is mounted to /data\\n otherwise any flow changes are lost when you redeploy or upgrade the container\\n (e.g. upgrade to a more recent node-red docker image).\\n  If you are using named volumes you can ignore this warning.\\n Double click or see info side panel to learn how to start Node-RED in Docker to save your work","info":"\nTo start docker with a bind mount volume (-v option), for example:\n\n```\ndocker run -it -p 1880:1880 -v /home/user/node_red_data:/data --name mynodered nodered/node-red\n```\n\nwhere `/home/user/node_red_data` is a directory on your host machine where you want to store your flows.\n\nIf you do not do this then you can experiment and redploy flows, but if you restart or upgrade the container the flows will be disconnected and lost. \n\nThey will still exist in a hidden data volume, which can be recovered using standard docker techniques, but that is much more complex than just starting with a named volume as described above.","x":350,"y":80,"wires":[]},{"id":"1b1ee19f.24b52e","type":"debug","z":"e428c615.0e1c58","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.content","targetType":"msg","statusVal":"","statusType":"auto","x":760,"y":140,"wires":[]},{"id":"a1af2c59.eba9f","type":"inject","z":"74bcfb9a.3ad194","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":120,"y":80,"wires":[["67dd086c.ad4ac8"]]},{"id":"67dd086c.ad4ac8","type":"influxdb in","z":"74bcfb9a.3ad194","influxdb":"8e05a758.3df478","name":"Horaria_501","query":"SELECT last(\"PRESSAO_DESCARGA\")  / 10 FROM \"CL_REFRIGERACAO\" WHERE time >= now() - 20s GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":310,"y":80,"wires":[["de271c30.cc8f2"]]},{"id":"de271c30.cc8f2","type":"function","z":"74bcfb9a.3ad194","name":"OAE_501","func":"\nmsg.payload.type = 'message'\nmsg.payload.chatId= -418416474\nmsg.payload.content=  \"Última Horária 512:\" + msg.payload[0].difference;\n\nreturn msg\n\n\n\n\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":80,"wires":[["9760865d.9e3d08"]]},{"id":"9760865d.9e3d08","type":"debug","z":"74bcfb9a.3ad194","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":650,"y":80,"wires":[]},{"id":"9f443d37.4681b","type":"debug","z":"6267b9e6.8530b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":353.33333587646484,"y":86.66666221618652,"wires":[]},{"id":"ba940e8f.1e3a7","type":"catch","z":"6267b9e6.8530b8","name":"","scope":null,"x":123.33333587646484,"y":86.66666793823242,"wires":[["9f443d37.4681b"]]},{"id":"1cfc1680.16076a","type":"telegram event","z":"6267b9e6.8530b8","name":"","bot":"ab58ea9b.d32e98","event":"callback_query","autoanswer":true,"x":123.74998474121094,"y":359.00000190734863,"wires":[["6b080b74.5f07d4"]]},{"id":"3cdddf36.2e4c","type":"telegram sender","z":"6267b9e6.8530b8","name":"show inline keyboard","bot":"ab58ea9b.d32e98","haserroroutput":false,"outputs":1,"x":518.1944580078125,"y":193.61105108261108,"wires":[["b1fa73f5.9571d"]]},{"id":"516762e3.3c0ffc","type":"function","z":"6267b9e6.8530b8","name":"areas menu","func":"var opts = {\n  reply_markup: JSON.stringify({\n    \"inline_keyboard\": [\n        [{\"text\": \"Packaging\",\"callback_data\": 1}],\n//       [{\"text\": \"Logística\",\"callback_data\": 2}],\n        [{\"text\": \"Processo\",\"callback_data\": 3}],\n        [{\"text\": \"Utilidades\",\"callback_data\": 4}],\n        \n    ],\n    'one_time_keyboard' : true\n  })\n};\nflow.set(\"prev_state\", 0);\nflow.set(\"curr_state\", 0);\n\nmsg.payload.content = 'Olá, eu sou o CRAB!Para começar, você pode escolher a área que deseja consultar informações:';\nmsg.payload.options = opts;\n\nreturn [ msg ];","outputs":"1","noerr":0,"initialize":"","finalize":"","x":283.74999237060547,"y":193.7499623298645,"wires":[["3cdddf36.2e4c"]]},{"id":"b3e40fbd.09253","type":"telegram command","z":"6267b9e6.8530b8","name":"/start","command":"Oi","bot":"ab58ea9b.d32e98","strict":false,"hasresponse":false,"useregex":false,"removeregexcommand":false,"outputs":1,"x":110,"y":194.9999737739563,"wires":[["516762e3.3c0ffc"]]},{"id":"e2a32e00.5dc13","type":"function","z":"6267b9e6.8530b8","name":"delete previous menu","func":"msgId = flow.get('messageId');\nchatId = flow.get('chatId');\ncontent = flow.get(\"content\");\n\n\nmsg.payload = {chatId: chatId, \n               type: 'deleteMessage' ,\n               //messageId: msgId,\n               content: msgId\n};\n\n\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":643.7499847412109,"y":299.00000190734863,"wires":[["902d1383.44083"]]},{"id":"902d1383.44083","type":"telegram sender","z":"6267b9e6.8530b8","name":"answer callback query","bot":"ab58ea9b.d32e98","haserroroutput":false,"outputs":1,"x":960,"y":360,"wires":[["b1fa73f5.9571d","3f2b57d4.9e7158"]]},{"id":"42c07661.5a2488","type":"function","z":"6267b9e6.8530b8","name":"menu builder","func":"msg.payload = {chatId: flow.get('chatId'), \n               messageId: flow.get('messageId'),\n               content: flow.get('content')\n               \n};\n// ======= MENUS  =======\n\nfunction build_inicio(){\n    //Inicio\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"Packaging\",\"callback_data\": 1}],\n//          [{\"text\": \"Logística\",\"callback_data\": 2}],\n            [{\"text\": \"Processo\",\"callback_data\": 3}],\n            [{\"text\": \"Utilidades\",\"callback_data\": 4}],\n            \n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    return opts;\n}\n\n// ### Packaging ###\nfunction build_packaging(){\n    //Packaging\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"501\",\"callback_data\": \"1.1\"}],\n            [{\"text\": \"502\",\"callback_data\": \"1.2\"}],\n            [{\"text\": \"511\",\"callback_data\": \"1.3\"}],\n            [{\"text\": \"512\",\"callback_data\": \"1.4\"}],\n            [{\"text\": \"Número TP e Volume por linha\",\"callback_data\": \"3.1.1.18\"}],\n            [{\"text\": \"Status das Enchedoras\",\"callback_data\": \"3.1.1.19\"}],\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"0.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Selecione uma linha de packaging: ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg];\n}\n\nfunction build_turnospackaging(linha, pref){\n    //Turnos packaging\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [{\"text\": \"Turno A - Após fechamento do turno\",\"callback_data\": pref + \".1.a\"}],\n            [{\"text\": \"Turno B - Após fechamento do turno\",\"callback_data\": pref + \".1.b\"}],\n            [{\"text\": \"Turno C - Após fechamento do turno\",\"callback_data\": pref + \".1.c\"}],\n//            [{\"text\": \"Últimas 24h\",\"callback_data\": pref + \".1.d\"}],\n            [{\"text\": \"Última Horaria\",\"callback_data\": pref + \".1.e\"}],\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"0.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Selecione um turno da linha ' + linha +': ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", pref + \".1.a\");\n    flow.set(\"prev_state\", pref);\n    return [msg];\n}\n\nfunction build_indicatorspackaging(linha, pref){\n    //Indicators packaging\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [{\"text\": \"Produção Bruta\",\"callback_data\": pref + \".1\"}],\n         \n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"0.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Selecione um indicador da linha ' + linha +': ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", pref);\n    flow.set(\"prev_state\", \"1\");\n    return [msg];\n}\n//##Processo##\nfunction build_processo(){\n    //Processo\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"Adegas\",\"callback_data\": \"3.1\"}], // itens 3.2-3.3 estão dentro dos ODS.\n            [{\"text\": \"Adegas de Pressão\",\"callback_data\": \"3.5\"}],\n            [{\"text\": \"Filtração\",\"callback_data\": \"3.1.1.17\"}],\n            [{\"text\": \"Brassagem\",\"callback_data\": \"3.6\"}],\n//          [{\"text\": \"Em breve\",\"callback_data\": \"3.7\"}],\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"0.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'O que deseja consultar no Processo? ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg];\n    }\n//##############################################################################\n\n//##Processo##\nfunction build_select_ods(){\n    //Processo\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"ODs 111 á 123\",\"callback_data\": \"3.1.1\"}],\n            [{\"text\": \"ODs 124 á 136\",\"callback_data\": \"3.2.1\"}],\n            [{\"text\": \"ODs 137 á 149\",\"callback_data\": \"3.3.1\"}],\n            [{\"text\": \"STATUS dos Ods\",\"callback_data\": \"3.3.1.13\"}],\n            [{\"text\": \"Tempo Fermentação Ods\",\"callback_data\": \"3.2.1.13\"}],\n\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'O que deseja consultar no Processo? ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg];\n    }\n\n//##Brassagem####\nfunction build_brassagem(){\n    //brassagem\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"Estoque HIGH Maltose\",\"callback_data\": \"3.6.2\"}],\n            [{\"text\": \"Tempo filtro prensa\",\"callback_data\": \"3.6.3\"}],\n//          [{\"text\": \"em breve\",\"callback_data\": \"3.7.3\"}],\n          \n\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'O que deseja consultar na Brassagem? ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"3\");\n\n    return [msg];\n    }\n   \n //OD's\n function build_ods_111_123(){\n    //OD's 111_123\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"OD111\",\"callback_data\": \"3.1.1.1\"}],\n            [{\"text\": \"OD112\",\"callback_data\": \"3.1.1.2\"}],\n            [{\"text\": \"OD113\",\"callback_data\": \"3.1.1.3\"}],\n            [{\"text\": \"OD114\",\"callback_data\": \"3.1.1.4\"}],\n            [{\"text\": \"OD115\",\"callback_data\": \"3.1.1.5\"}],\n            [{\"text\": \"OD116\",\"callback_data\": \"3.1.1.6\"}],\n            [{\"text\": \"OD117\",\"callback_data\": \"3.1.1.7\"}],\n            [{\"text\": \"OD118\",\"callback_data\": \"3.1.1.8\"}],\n            [{\"text\": \"OD119\",\"callback_data\": \"3.1.1.9\"}],\n            [{\"text\": \"OD121\",\"callback_data\": \"3.1.1.10\"}],\n            [{\"text\": \"OD122\",\"callback_data\": \"3.1.1.11\"}],\n            [{\"text\": \"OD123\",\"callback_data\": \"3.1.1.12\"}],\n\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Qual OD deseja informação?';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg]; \n}\nfunction build_ods_124_136(){\n    //OD's 124_136\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"OD124\",\"callback_data\": \"3.2.1.1\"}],\n            [{\"text\": \"OD125\",\"callback_data\": \"3.2.1.2\"}],\n            [{\"text\": \"OD126\",\"callback_data\": \"3.2.1.3\"}],\n            [{\"text\": \"OD127\",\"callback_data\": \"3.2.1.4\"}],\n            [{\"text\": \"OD128\",\"callback_data\": \"3.2.1.5\"}],\n            [{\"text\": \"OD129\",\"callback_data\": \"3.2.1.6\"}],\n            [{\"text\": \"OD131\",\"callback_data\": \"3.2.1.7\"}],\n            [{\"text\": \"OD132\",\"callback_data\": \"3.2.1.8\"}],\n            [{\"text\": \"OD133\",\"callback_data\": \"3.2.1.9\"}],\n            [{\"text\": \"OD134\",\"callback_data\": \"3.2.1.10\"}],\n            [{\"text\": \"OD135\",\"callback_data\": \"3.2.1.11\"}],\n            [{\"text\": \"OD136\",\"callback_data\": \"3.2.1.12\"}],\n\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Qual OD deseja informação?';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg]; \n}\nfunction build_ods_137_149(){\n    //OD's 137_149\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"OD137\",\"callback_data\": \"3.3.1.1\"}],\n            [{\"text\": \"OD138\",\"callback_data\": \"3.3.1.2\"}],\n            [{\"text\": \"OD139\",\"callback_data\": \"3.3.1.3\"}],\n            [{\"text\": \"OD141\",\"callback_data\": \"3.3.1.4\"}],\n            [{\"text\": \"OD142\",\"callback_data\": \"3.3.1.5\"}],\n            [{\"text\": \"OD143\",\"callback_data\": \"3.3.1.6\"}],\n            [{\"text\": \"OD144\",\"callback_data\": \"3.3.1.7\"}],\n            [{\"text\": \"OD145\",\"callback_data\": \"3.3.1.8\"}],\n            [{\"text\": \"OD146\",\"callback_data\": \"3.3.1.9\"}],\n            [{\"text\": \"OD147\",\"callback_data\": \"3.3.1.10\"}],\n            [{\"text\": \"OD148\",\"callback_data\": \"3.3.1.11\"}],\n            [{\"text\": \"OD149\",\"callback_data\": \"3.3.1.12\"}],\n\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Qual OD deseja informação?';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg]; \n}\n \n//##Utilidades##\nfunction build_utilidades(){\n    //Utilidades\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"Vapor\",\"callback_data\": \"3.1.1.14\"}],\n            [{\"text\": \"CO2\",\"callback_data\": \"3.1.1.15\"}],\n           [{\"text\": \"FRIO/AR\",\"callback_data\": \"3.1.1.16\"}],\n//            [{\"text\": \"em breve\",\"callback_data\": \"4.4\"}],\n//          [{\"text\": \"Em breve\",\"callback_data\": \"4.5\"}],\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"0.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'Selecione a área da Utilidades que deseja informação: ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg];\n}\n//##Adegas de Pressão##\nfunction build_adegas_pressao(){\n    //Adegas de pressão\n    var opts = {\n      reply_markup: JSON.stringify({\n        \"inline_keyboard\": [\n            [{\"text\": \"Estoque dos tanques\",\"callback_data\": \"3.1.1.13\"}], \n            [{\"text\": \"Volume enviado para o Packaging\",\"callback_data\": \"3.5.2\"}],\n//          [{\"text\": \"futuro\",\"callback_data\": \"3.5...\"}],\n\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"}, \n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = 'O que deseja consultar das Adegas de Pressão? ';\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1\");\n    flow.set(\"prev_state\", \"0\");\n\n    return [msg];\n    }\n// #################\n\n\n// ======= User navigation  =======\n// ### Packaging ###\nif (msg.payload.content == \"0\"){\n    //Inicio\n    msg.payload.content = 'Você deseja consultar informações sobre qual área?';\n    msg.payload.options = build_inicio();\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"0\");\n    flow.set(\"prev_state\", \"0\");\n    return [msg]\n}\n\nelse if (msg.payload.content == \"1\"){\n    //Packaging menu\n    return build_packaging()\n}\nelse if (msg.payload.content == \"3\"){\n    //Processo menu\n    return build_processo()\n}\nelse if (msg.payload.content == \"3.1\"){\n    //Seleção ODs\n    return build_select_ods()\n}\nelse if (msg.payload.content == \"3.1.1\"){\n    //ODs 111_123\n    return build_ods_111_123()\n}\nelse if (msg.payload.content == \"3.2.1\"){\n    //ODs 124_136\n    return build_ods_124_136()\n}\nelse if (msg.payload.content == \"3.3.1\"){\n    //ODs 137_149\n    return build_ods_137_149()\n}\n\nelse if (msg.payload.content == \"3.5\"){\n    //Adegas de pressão\n    return build_adegas_pressao()\n}\nelse if (msg.payload.content == \"3.6\"){\n    //Brassagem\n    return build_brassagem()\n}\nelse if (msg.payload.content == \"4\"){\n    //Utilidades\n    return build_utilidades()\n}\n\n//Tanque/Volume enviado pack\nelse if(msg.payload.content == \"3.1.1.18\"){\n    flow.set(\"curr_state\", \"3.1.1.18\");\n    flow.set(\"prev_state\", \"1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.18\");\n    flow.set(\"prev_state\", \"1\");\n    return [ msg ];    \n}\n//Status ECH\nelse if(msg.payload.content == \"3.1.1.19\"){\n    flow.set(\"curr_state\", \"3.1.1.19\");\n    flow.set(\"prev_state\", \"1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.19\");\n    flow.set(\"prev_state\", \"1\");\n    return [ msg ];    \n}\n//501: Main menu\n//Indicators packaging menu: 501\nelse if(msg.payload.content == \"1.1\"){\n    return build_indicatorspackaging(501, \"1.1\")\n}\n\n//501: Turnos packaging menu\nelse if(msg.payload.content == \"1.1.1\"){\n    return build_turnospackaging(501, \"1.1\")\n}\n\n\n//501; Horaria\nelse if(msg.payload.content == \"1.1.1.e\"){\n    flow.set(\"curr_state\", \"1.1.1.e\");\n    flow.set(\"prev_state\", \"1.1.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.1.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.1.1.e\");\n    flow.set(\"prev_state\", \"1.1.1\");\n    return [ msg ];    \n}\n\n//501: Producao bruta da linha\nelse if(msg.payload.content == \"1.1.1.a\" || msg.payload.content == \"1.1.1.b\" || \n            msg.payload.content == \"1.1.1.c\" || msg.payload.content == \"1.1.1.d\"){\n    // Turno A: 1.1.1.a\n    // Turno A: 1.1.1.b\n    // Turno A: 1.1.1.c\n     //Turnos packaging\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.1.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.1.a\");\n    flow.set(\"prev_state\", \"1.1\");\n    return [ msg ];    \n}\n\n\n\n// #################\n//502: Main menu\n//Indicators packaging menu: 502\nelse if(msg.payload.content == \"1.2\"){\n    return build_indicatorspackaging(502, \"1.2\")\n}\n\n//502: Turnos packaging menu\nelse if(msg.payload.content == \"1.2.1\"){\n    return build_turnospackaging(502, \"1.2\")\n}\n\n//502; horaria\nelse if(msg.payload.content == \"1.2.1.e\"){\n    flow.set(\"curr_state\", \"1.2.1.e\");\n    flow.set(\"prev_state\", \"1.2\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.2\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.2.1.e\");\n    flow.set(\"prev_state\", \"1.2\");\n    return [ msg ];    \n}\n\n//502: Producao bruta da linha\nelse if(msg.payload.content == \"1.2.1.a\" || msg.payload.content == \"1.2.1.b\" || \n            msg.payload.content == \"1.2.1.c\" || msg.payload.content == \"1.2.1.d\"){\n    // Turno A: 1.2.1.a\n    // Turno A: 1.2.1.b\n    // Turno A: 1.2.1.c\n     //Turnos packaging\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.2.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.2.a\");\n    flow.set(\"prev_state\", \"1.2\");\n    return [ msg ];    \n}\n// #################\n\n//511: Main menu\n//Indicators packaging menu: 511\nelse if(msg.payload.content == \"1.3\"){\n    return build_indicatorspackaging(511, \"1.3\")\n}\n\n//511: Turnos packaging menu\nelse if(msg.payload.content == \"1.3.1\"){\n    return build_turnospackaging(511, \"1.3\")\n}\n\n//511; OAE packaging menu\nelse if(msg.payload.content == \"1.3.1.e\"){\n    flow.set(\"curr_state\", \"1.3.1.e\");\n    flow.set(\"prev_state\", \"1.3\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.3.1.e\");\n    flow.set(\"prev_state\", \"1.3\");\n    return [ msg ];\n}\n\n//511: Producao bruta da linha\nelse if(msg.payload.content == \"1.3.1.a\" || msg.payload.content == \"1.3.1.b\" || \n            msg.payload.content == \"1.3.1.c\" || msg.payload.content == \"1.3.1.d\"){\n    // Turno A: 1.3.1.a\n    // Turno A: 1.3.1.b\n    // Turno A: 1.3.1.c\n     //Turnos packaging\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.3.a\");\n    flow.set(\"prev_state\", \"1.3\");\n    return [ msg ];    \n}\n// ################# h\n//512: Main menu\n//Indicators packaging menu: 512\nelse if(msg.payload.content == \"1.4\"){\n    return build_indicatorspackaging(512, \"1.4\")\n}\n\n//512: Turnos packaging menu\nelse if(msg.payload.content == \"1.4.1\"){\n    return build_turnospackaging(512, \"1.4\")\n}\n\n//512; OAE packaging menu\nelse if(msg.payload.content == \"1.4.1.e\"){\n    flow.set(\"curr_state\", \"1.4.1.e\");\n    flow.set(\"prev_state\", \"1.4\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.4\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.4.1.e\");\n    flow.set(\"prev_state\", \"1.4\");\n    return [ msg ];\n}\n\n//512: Producao bruta da linha\nelse if(msg.payload.content == \"1.4.1.a\" || msg.payload.content == \"1.4.1.b\" || \n            msg.payload.content == \"1.4.1.c\" || msg.payload.content == \"1.4.1.d\"){\n    // Turno A: 1.4.1.a\n    // Turno A: 1.4.1.b\n    // Turno A: 1.4.1.c\n     //Turnos packaging\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"1.4.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content');\n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"1.4.a\");\n    flow.set(\"prev_state\", \"1.4\");\n    return [ msg ];    \n}\n\n\n// #################Inicio Seleção ODS 111 até 149##############################\n//OD111\nelse if(msg.payload.content == \"3.1.1.1\"){\n    flow.set(\"curr_state\", \"3.1.1.1\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.1\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n// #################\n\n//OD112\nelse if(msg.payload.content == \"3.1.1.2\"){\n    flow.set(\"curr_state\", \"3.1.1.2\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.2\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n// #################\n//OD113\nelse if(msg.payload.content == \"3.1.1.3\"){\n    flow.set(\"curr_state\", \"3.1.1.3\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.3\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n// #################\n//OD114\nelse if(msg.payload.content == \"3.1.1.4\"){\n    flow.set(\"curr_state\", \"3.1.1.4\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.4\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n\n// #################\n//OD115\nelse if(msg.payload.content == \"3.1.1.5\"){\n    flow.set(\"curr_state\", \"3.1.1.5\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.5\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n// #################\n//OD116\nelse if(msg.payload.content == \"3.1.1.6\"){\n    flow.set(\"curr_state\", \"3.1.1.6\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.6\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD117\nelse if(msg.payload.content == \"3.1.1.7\"){\n    flow.set(\"curr_state\", \"3.1.1.7\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.7\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n// #################\n//OD118\nelse if(msg.payload.content == \"3.1.1.8\"){\n    flow.set(\"curr_state\", \"3.1.1.8\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.8\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD119\nelse if(msg.payload.content == \"3.1.1.9\"){\n    flow.set(\"curr_state\", \"3.1.1.9\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.9\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD121\nelse if(msg.payload.content == \"3.1.1.10\"){\n    flow.set(\"curr_state\", \"3.1.1.10\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.10\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n// #################\n//OD122\nelse if(msg.payload.content == \"3.1.1.11\"){\n    flow.set(\"curr_state\", \"3.1.1.11\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.11\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD123\nelse if(msg.payload.content == \"3.1.1.12\"){\n    flow.set(\"curr_state\", \"3.1.1.12\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.12\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD124\nelse if(msg.payload.content == \"3.2.1.1\"){\n    flow.set(\"curr_state\", \"3.2.1.1\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.1\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD125\nelse if(msg.payload.content == \"3.2.1.2\"){\n    flow.set(\"curr_state\", \"3.2.1.2\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.2\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD126\nelse if(msg.payload.content == \"3.2.1.3\"){\n    flow.set(\"curr_state\", \"3.2.1.3\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.3\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD127\nelse if(msg.payload.content == \"3.2.1.4\"){\n    flow.set(\"curr_state\", \"3.2.1.4\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.4\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD128\nelse if(msg.payload.content == \"3.2.1.5\"){\n    flow.set(\"curr_state\", \"3.2.1.5\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.5\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD129\nelse if(msg.payload.content == \"3.2.1.6\"){\n    flow.set(\"curr_state\", \"3.2.1.6\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.6\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD131\nelse if(msg.payload.content == \"3.2.1.7\"){\n    flow.set(\"curr_state\", \"3.2.1.7\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.7\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD132\nelse if(msg.payload.content == \"3.2.1.8\"){\n    flow.set(\"curr_state\", \"3.2.1.8\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.8\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD133\nelse if(msg.payload.content == \"3.2.1.9\"){\n    flow.set(\"curr_state\", \"3.2.1.9\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.9\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD134\nelse if(msg.payload.content == \"3.2.1.10\"){\n    flow.set(\"curr_state\", \"3.2.1.10\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.10\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD135\nelse if(msg.payload.content == \"3.2.1.11\"){\n    flow.set(\"curr_state\", \"3.2.1.11\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.11\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n//OD136\nelse if(msg.payload.content == \"3.2.1.12\"){\n    flow.set(\"curr_state\", \"3.2.1.12\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.12\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n// #################\n//OD137\nelse if(msg.payload.content == \"3.3.1.1\"){\n    flow.set(\"curr_state\", \"3.3.1.1\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.1\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD138\nelse if(msg.payload.content == \"3.3.1.2\"){\n    flow.set(\"curr_state\", \"3.3.1.2\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.2\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD139\nelse if(msg.payload.content == \"3.3.1.3\"){\n    flow.set(\"curr_state\", \"3.3.1.3\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.3\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD141\nelse if(msg.payload.content == \"3.3.1.4\"){\n    flow.set(\"curr_state\", \"3.3.1.4\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.4\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD142\nelse if(msg.payload.content == \"3.3.1.5\"){\n    flow.set(\"curr_state\", \"3.3.1.5\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.5\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD143\nelse if(msg.payload.content == \"3.3.1.6\"){\n    flow.set(\"curr_state\", \"3.3.1.6\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.6\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD144\nelse if(msg.payload.content == \"3.3.1.7\"){\n    flow.set(\"curr_state\", \"3.3.1.7\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.7\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD145\nelse if(msg.payload.content == \"3.3.1.8\"){\n    flow.set(\"curr_state\", \"3.3.1.8\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.8\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD146\nelse if(msg.payload.content == \"3.3.1.9\"){\n    flow.set(\"curr_state\", \"3.3.1.9\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.9\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD147\nelse if(msg.payload.content == \"3.3.1.10\"){\n    flow.set(\"curr_state\", \"3.3.1.10\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.10\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD148\nelse if(msg.payload.content == \"3.3.1.11\"){\n    flow.set(\"curr_state\", \"3.3.1.11\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.11\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n// #################\n\n//OD149\nelse if(msg.payload.content == \"3.3.1.12\"){\n    flow.set(\"curr_state\", \"3.3.1.12\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.12\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n//#############################################################################\n//STATUS OD\nelse if(msg.payload.content == \"3.3.1.13\"){\n    flow.set(\"curr_state\", \"3.3.1.13\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.13\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n// ############################################################################\n//Volume_tanques_adegas_pressão\nelse if(msg.payload.content == \"3.1.1.13\"){\n    flow.set(\"curr_state\", \"3.1.1.13\");\n    flow.set(\"prev_state\", \"3.5\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.5\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.13\");\n    flow.set(\"prev_state\", \"3.5\");\n    return [ msg ];\n}\n\n//#############################################################################\n//STATUS OD\nelse if(msg.payload.content == \"3.3.1.13\"){\n    flow.set(\"curr_state\", \"3.3.1.13\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.3.1.13\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n// ############################################################################\n//Tempo dos Ods em Fermentação\nelse if(msg.payload.content == \"3.2.1.13\"){\n    flow.set(\"curr_state\", \"3.2.1.13\");\n    flow.set(\"prev_state\", \"3.1\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.1\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.2.1.13\");\n    flow.set(\"prev_state\", \"3.1\");\n    return [ msg ];\n}\n\n//##############################################################################\n//Volume enviado pack \nelse if(msg.payload.content == \"3.5.2\"){\n    flow.set(\"curr_state\", \"3.5.2\");\n    flow.set(\"prev_state\", \"3.5\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3.5\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.5.2\");\n    flow.set(\"prev_state\", \"3.5\");\n    return [ msg ];\n}\n//#############################################################################\n\n//Vapor\nelse if(msg.payload.content == \"3.1.1.14\"){\n    flow.set(\"curr_state\", \"3.1.1.14\");\n    flow.set(\"prev_state\", \"4\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"4\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.14\");\n    flow.set(\"prev_state\", \"4\");\n    return [ msg ];\n}\n//################################################################\n//CO2\nelse if(msg.payload.content == \"3.1.1.15\"){\n    flow.set(\"curr_state\", \"3.1.1.15\");\n    flow.set(\"prev_state\", \"4\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"4\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.15\");\n    flow.set(\"prev_state\", \"4\");\n    return [ msg ];\n}\n//###############################################################\n//FRIO/AR\nelse if(msg.payload.content == \"3.1.1.16\"){\n    flow.set(\"curr_state\", \"3.1.1.16\");\n    flow.set(\"prev_state\", \"4\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"4\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.16\");\n    flow.set(\"prev_state\", \"4\");\n    return [ msg ];\n}\n//##############################################################################\n//Filtração\nelse if(msg.payload.content == \"3.1.1.17\"){\n    flow.set(\"curr_state\", \"3.1.1.17\");\n    flow.set(\"prev_state\", \"3\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.1.1.17\");\n    flow.set(\"prev_state\", \"3\");\n    return [ msg ];\n}\n//##############################################################################\n//High maltose\nelse if(msg.payload.content == \"3.6.2\"){\n    flow.set(\"curr_state\", \"3.6.2\");\n    flow.set(\"prev_state\", \"3\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.6.2\");\n    flow.set(\"prev_state\", \"3\");\n    return [ msg ];\n}\n//##############################################################################\n//Tempo filtro prensa\nelse if(msg.payload.content == \"3.6.3\"){\n    flow.set(\"curr_state\", \"3.6.3\");\n    flow.set(\"prev_state\", \"3\");\n    var opts = {\n        reply_markup:JSON.stringify({\n         \"inline_keyboard\": [\n            [\n              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n              {\"text\": \"Voltar\",\"callback_data\": \"3\"}, \n            ],\n        ],\n        'one_time_keyboard' : true\n      })\n    };\n    msg.payload.content = flow.get('curr_content'); \n    msg.payload.options = opts;\n    msg.payload.type = 'message';\n    flow.set(\"curr_state\", \"3.6.3\");\n    flow.set(\"prev_state\", \"3\");\n    return [ msg ];\n}\n//#############################################################################\n//else if(msg.payload.content == \"4\"){\n//    //Utilidades\n//    var opts = {\n//        reply_markup:JSON.stringify({\n//         \"inline_keyboard\": [\n//            [\n//              {\"text\": \"Inicio\",\"callback_data\": \"0\"},\n//            ],\n//        ],\n//        'one_time_keyboard' : true\n//      })\n//    };\n//    msg.payload.content = \"O time do ITF está me alimentando com os dados sobre utilidades. Em breve você vai poder consultar tudo por aqui!\";\n//    msg.payload.options = opts;\n //   msg.payload.type = 'message';\n//    flow.set(\"curr_state\", \"2\");\n//    flow.set(\"prev_state\", \"1\");\n//    return [ msg ];\n//}\n// ### Voltar Buttom ###\nelse if (msg.payload.content == \"0.1\"){\n\n    if (flow.get(\"curr_state\") == \"1\"){\n        //Packaging menu > Inicio \n        msg.payload.content = 'Você deseja consultar informações sobre qual área?';\n        msg.payload.options = build_inicio();\n        msg.payload.type = 'message';\n        flow.set(\"curr_state\", \"0\");\n        flow.set(\"prev_state\", \"0\");\n        return [msg]\n    }\n    else if (flow.get(\"curr_state\") == \"1.1\" || flow.get(\"curr_state\") == \"1.2\"\n            || flow.get(\"curr_state\") == \"1.3\" || flow.get(\"curr_state\") == \"1.4\"\n            || flow.get(\"curr_state\") == \"1.5\"){\n        //Linhas > Packaging menu\n        flow.set(\"curr_state\", \"1\");\n        flow.set(\"prev_state\", \"0\");\n        return build_packaging()\n    }\n    //501\n    else if (flow.get(\"curr_state\") == \"1.1.1.a\" || flow.get(\"curr_state\") == \"1.1.2\"){\n        //Turnos packaging menu > Packaging menu\n        flow.set(\"curr_state\", \"1.1\");\n        flow.set(\"prev_state\", \"1\");\n        return build_indicatorspackaging(501, \"1.1\")\n    }\n    //502\n    else if (flow.get(\"curr_state\") == \"1.2.1.a\" || flow.get(\"curr_state\") == \"1.2.2\"){\n        //Turnos packaging menu > Packaging menu\n        flow.set(\"curr_state\", \"1.2\");\n        flow.set(\"prev_state\", \"1\");\n        return build_indicatorspackaging(502, \"1.2\")\n    }\n    //511\n    else if (flow.get(\"curr_state\") == \"1.3.1.a\" || flow.get(\"curr_state\") == \"1.3.2\"){\n        //Turnos packaging menu > Packaging menu\n        flow.set(\"curr_state\", \"1.3\");\n        flow.set(\"prev_state\", \"1\");\n        return build_indicatorspackaging(511, \"1.3\")\n    }\n    //512\n    else if (flow.get(\"curr_state\") == \"1.4.1.a\" || flow.get(\"curr_state\") == \"1.4.2\"){\n        //Turnos packaging menu > Packaging menu\n        flow.set(\"curr_state\", \"1.4\");\n        flow.set(\"prev_state\", \"1\");\n        return build_indicatorspackaging(512, \"1.4\")\n    }\n    //561\n    else if (flow.get(\"curr_state\") == \"1.5.1.a\" || flow.get(\"curr_state\") == \"1.5.2\"){\n        //Turnos packaging menu > Packaging menu\n        flow.set(\"curr_state\", \"1.4\");\n        flow.set(\"prev_state\", \"1\");\n        return build_indicatorspackaging(561, \"1.5\")\n    }\n}","outputs":"1","noerr":0,"initialize":"","finalize":"","x":690,"y":360,"wires":[["902d1383.44083"]]},{"id":"6b080b74.5f07d4","type":"function","z":"6267b9e6.8530b8","name":"save message","func":"// // We store the messageId to be able to edit this reply in the callback query. \n// context.global.keyboard.messageId = msg.payload.sentMessageId;\n// return [ msg ];\n\nflow.set('chatId', msg.payload.chatId);\nflow.set(\"messageId\",msg.payload.messageId);\nflow.set(\"type\", msg.payload.type);\nflow.set(\"content\", msg.payload.content);\n\nreturn msg;","outputs":"1","noerr":0,"initialize":"","finalize":"","x":320,"y":360,"wires":[["e2a32e00.5dc13","75aae4f4.48f38c"]]},{"id":"677da69e.042138","type":"switch","z":"6267b9e6.8530b8","name":"packaging 501","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"1.1.1.a","vt":"str"},{"t":"eq","v":"1.1.1.b","vt":"str"},{"t":"eq","v":"1.1.1.c","vt":"str"},{"t":"eq","v":"1.1.1.d","vt":"str"},{"t":"eq","v":"1.1.2","vt":"str"},{"t":"eq","v":"1.1.1.e","vt":"str"},{"t":"eq","v":"1.5","vt":"str"}],"checkall":"true","repair":false,"outputs":7,"x":160,"y":520,"wires":[["3aea13b5.331b3c"],["7fbd133b.b3557c"],["659744aa.a2afdc"],["9f607252.ef7ef"],[],["cccfe2c1.d96b4"],[]]},{"id":"75aae4f4.48f38c","type":"link out","z":"6267b9e6.8530b8","name":"","links":["f5c811ce.48ed9","74382e4b.9ae21","3e050971.c04e66","10ba00c9.68fc2f","47bc4934.38e028","5e68ed47.044fe4","a8c051c0.f7f61","cd625960.7d5278","830623ef.d64ab","b7aabc54.9f91","7a3827f2.553088","9fd3dff2.293c6","5adc4a68.f25254","8b231cdc.516d5","3a603c7d.4e6364"],"x":455,"y":360,"wires":[]},{"id":"f5c811ce.48ed9","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":35,"y":520,"wires":[["677da69e.042138"]]},{"id":"c55b6e8a.ae5c","type":"function","z":"6267b9e6.8530b8","name":"TB_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'B'\nvar linha = '501'\nvar query = ''; //'Os dados de produção bruta linha ' + linha + ' no turno ' + turno +  ' são: \\n \\n';\nvar lower_b = 8;\nvar upper_b = 15;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n'+ \"Ou seja,\"+ sum_turno * 0.003+\"hL\" );\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno B 501\");\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":520,"wires":[["fca3a75c.2f4b68"]]},{"id":"659744aa.a2afdc","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":560,"wires":[["37213d30.a36da2"]]},{"id":"37213d30.a36da2","type":"function","z":"6267b9e6.8530b8","name":"TC_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'C'\nvar linha = '501'\nvar query = '';\nvar lower_b = 16;\nvar upper_b = 23;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n'+ \"Ou seja,\"+ sum_turno * 0.003+\"hL\");\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno C 501\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":560,"wires":[["fca3a75c.2f4b68"]]},{"id":"fca3a75c.2f4b68","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":915,"y":580,"wires":[]},{"id":"b3aad8f0.9ca418","type":"link in","z":"6267b9e6.8530b8","name":"","links":["fca3a75c.2f4b68","91241974.5df308","b2487c0e.24ed7","bad1fbc5.7c9618","d00f10c0.60022","3e3dd76.aa83128","f81faebb.516ed","1659a41d.169a4c","b1918030.28965","c85fc3b4.11fc7","6853db80.dbf224","3c3b80e3.d5c1","e28ac576.fe51a8","6f61bacf.a26b04","b02da52e.0aa428","87f007dc.6ed7e8","b2bea824.b28038"],"x":535,"y":360,"wires":[["42c07661.5a2488"]]},{"id":"3cc7d2e8.604dee","type":"function","z":"6267b9e6.8530b8","name":"OAE_501","func":"query = \"Ainda não existem dados de OAE disponíveis para a linha 501.\\nPor favor, entre em contato com o time de tecnologia e solicite a adição das informações.\\nObrigado\"\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":140,"y":600,"wires":[[]]},{"id":"725db1fa.ef9af","type":"function","z":"6267b9e6.8530b8","name":"24h_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nvar arr = msg.payload;\nvar linha = '501'\nvar query = '';\nvar lower_b = 0;\nvar sum_day = 0;\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n\n    var hour = timestamp.getHours();\n\n    if (hour >= 0 ){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n\n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n    \n    if (hour >= 0 && timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()) {\n            sum_day = sum_day + process_pb(obj['difference']);\n    }\n}\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' de 00:00 do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\") até o momento: \\n\\n\";\nquery = query_title.concat(query);\nquery = query.concat(\"\\nA produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\"+ \"Ou seja,\"+ sum_day * 0.003+\"hL\");\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"24h 501\");\n\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":600,"wires":[["fca3a75c.2f4b68"]]},{"id":"a5e197d7.51c598","type":"switch","z":"6267b9e6.8530b8","name":"packaging 502","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"1.2.1.a","vt":"str"},{"t":"eq","v":"1.2.1.b","vt":"str"},{"t":"eq","v":"1.2.1.c","vt":"str"},{"t":"eq","v":"1.2.1.d","vt":"str"},{"t":"eq","v":"1.2.2","vt":"str"},{"t":"eq","v":"1.2.1.e","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":160,"y":760,"wires":[["3fb8890e.3d6fa6"],["cb63dfff.5f7e5"],["6a7c9021.e480f"],["7d449913.c226d8"],[],["9aa8fe37.a148"]]},{"id":"d96f661d.cce818","type":"function","z":"6267b9e6.8530b8","name":"TA_PB_L502","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '502'\nvar query = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        \n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno A 502\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":740,"wires":[["91241974.5df308"]]},{"id":"a3b4b5be.d13f48","type":"function","z":"6267b9e6.8530b8","name":"TB_PB_L502","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'B'\nvar linha = '502'\nvar query = '';\nvar lower_b = 8;\nvar upper_b = 15;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno B 502\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":780,"wires":[["91241974.5df308"]]},{"id":"6a7c9021.e480f","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L502","query":"SELECT difference(max(\"F8[31]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":820,"wires":[["2a624fc8.29baf"]]},{"id":"2a624fc8.29baf","type":"function","z":"6267b9e6.8530b8","name":"TC_PB_L502","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'C'\nvar linha = '502'\nvar query = '';\nvar lower_b = 16;\nvar upper_b = 23;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno C 502\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":820,"wires":[["91241974.5df308"]]},{"id":"28efe86.1d73c18","type":"function","z":"6267b9e6.8530b8","name":"OAE_502","func":"query = \"Ainda não existem dados de OAE disponíveis para a linha 502.\\nPor favor, entre em contato com o time de tecnologia e solicite a adição das informações.\\nObrigado\"\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":140,"y":840,"wires":[[]]},{"id":"2a5d7806.395ce8","type":"function","z":"6267b9e6.8530b8","name":"24h_PB_L502","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nvar arr = msg.payload;\nvar linha = '502'\nvar query = '';\nvar lower_b = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n\n    var hour = timestamp.getHours();\n\n    if (hour >= 0 ){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n\n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n    \n    if (hour >= 0 && timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()) {\n            sum_day = sum_day + process_pb(obj['difference']);\n    }\n}\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' de 00:00 do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\") até o momento: \\n\\n\";\nquery = query_title.concat(query);\nquery = query.concat(\"\\nA produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"24h 502\");\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":860,"wires":[["91241974.5df308"]]},{"id":"91241974.5df308","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":915,"y":840,"wires":[]},{"id":"c09b92f8.04c0a","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":35,"y":780,"wires":[["a5e197d7.51c598"]]},{"id":"74382e4b.9ae21","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":744.0276880264282,"y":55.416663646698,"wires":[["b4e3d9b.70cb528"]]},{"id":"b2487c0e.24ed7","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":1114.0276880264282,"y":55.416663646698,"wires":[]},{"id":"b4e3d9b.70cb528","type":"function","z":"6267b9e6.8530b8","name":"menu navigation - packaging","func":"if(msg.payload.content in {'1':\"\", '1.1':\"\", '1.1.1':\"\",\n                           '1.2':\"\", '1.2.1':\"\",\n                           '1.3':\"\", '1.3.1':\"\",\n                           '1.4':\"\", '1.4.1':\"\",\n                           '1.5':\"\", '1.5.1':\"\",\n                           '1.6':\"\", '1.6.1':\"\",\n                           '0':\"\", '0.1':\"\"}){\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":929.0276880264282,"y":55.416663646698,"wires":[["b2487c0e.24ed7"]]},{"id":"3fb8890e.3d6fa6","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L502","query":"SELECT difference(max(\"F8[31]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":740,"wires":[["d96f661d.cce818"]]},{"id":"cb63dfff.5f7e5","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L502","query":"SELECT difference(max(\"F8[31]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":780,"wires":[["a3b4b5be.d13f48"]]},{"id":"7d449913.c226d8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L502","query":"SELECT difference(max(\"F8[31]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":860,"wires":[["2a5d7806.395ce8"]]},{"id":"9f607252.ef7ef","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":600,"wires":[["725db1fa.ef9af"]]},{"id":"7fbd133b.b3557c","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":520,"wires":[["c55b6e8a.ae5c"]]},{"id":"3aea13b5.331b3c","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT non_negative_difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":480,"wires":[["31c871e1.a4c9be"]]},{"id":"d42ba123.24da7","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L511","query":"SELECT non_negative_difference(max(\"F8[61]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":960,"wires":[["5bf60c7.a84fbf4"]]},{"id":"a0ad409d.385d7","type":"switch","z":"6267b9e6.8530b8","name":"packaging 511","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"1.3.1.a","vt":"str"},{"t":"eq","v":"1.3.1.b","vt":"str"},{"t":"eq","v":"1.3.1.c","vt":"str"},{"t":"eq","v":"1.3.1.d","vt":"str"},{"t":"eq","v":"1.3.2","vt":"str"},{"t":"eq","v":"1.3.1.e","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":160,"y":1020,"wires":[["d42ba123.24da7"],["e293d844.6abc68"],["456ff6f0.a0de38"],["6d591d95.dd6884"],[],["c9b21313.97e09"]]},{"id":"10ba00c9.68fc2f","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":35,"y":1020,"wires":[["a0ad409d.385d7"]]},{"id":"d00f10c0.60022","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":955,"y":1040,"wires":[]},{"id":"e293d844.6abc68","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L511","query":"SELECT non_negative_difference(max(\"F8[61]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":1000,"wires":[["262c628.aacae9e"]]},{"id":"456ff6f0.a0de38","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L511","query":"SELECT non_negative_difference(max(\"F8[61]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":1040,"wires":[["8059cf2c.e01be"]]},{"id":"6d591d95.dd6884","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L511","query":"SELECT non_negative_difference(max(\"F8[61]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":1080,"wires":[["140b38e2.3d0587"]]},{"id":"fae785a5.a80e28","type":"function","z":"6267b9e6.8530b8","name":"handle OAE_511","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nvar arr = msg.payload;\nvar linha = '511';\nvar lower_b = 0;\nvar sum_day = 0;\nvar first_day = true;\n\nvar obj = arr[0];\nvar oae = obj['difference'];\n\nvar timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n\nvar hour = timestamp.getHours();\nvar hour_converted = pad(hour, 2);\nvar day_curr = timestamp.getDate()\n\nvar wkday = weekday[timestamp.getDay()];\nvar day = pad(day_curr, 2);\nvar mth = pad(month[timestamp.getMonth()], 2);\nvar year = timestamp.getFullYear();\nvar hour_converted = pad(hour, 2);\nvar minutes = pad(timestamp.getMinutes(), 2);\nvar row_timestamp = hour_converted + \":\" + minutes ;\n\nif (oae == 0){\n    var query = 'A OAE do dia ' + day + \"/\" + mth + \"/\" + year +\n    \" (\" +  wkday +\") na linha \" + linha +\" às \" + row_timestamp + \n    \" é de \"+ (oae*100).toFixed(2) + \"%. Por favor, verifique o funcionamento da linha\";\n}\nelse{\n    var query = 'A OAE do dia ' + day + \"/\" + mth + \"/\" + year +\n    \" (\" +  wkday +\") na linha \" + linha +\" às \" + row_timestamp + \n    \" é de \"+ (oae*100).toFixed(2) + \"%\";\n}\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n//node.warn('Resultado da query: ' + flow.get(\"curr_content\"));\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":170,"y":1140,"wires":[[]]},{"id":"52ecd26.1b0f12c","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OAE_511","query":"SELECT difference(max(\"F8[61]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":140,"y":1100,"wires":[[]]},{"id":"20f493bf.5a551c","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L512","query":"SELECT non_negative_difference(max(\"Total Produtos(Bruto)\")) FROM \"L512_ENCHEDORA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":360,"y":1240,"wires":[["a4e7904e.14c96"]]},{"id":"fe88fbb6.a6e698","type":"switch","z":"6267b9e6.8530b8","name":"packaging 512","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"1.4.1.a","vt":"str"},{"t":"eq","v":"1.4.1.b","vt":"str"},{"t":"eq","v":"1.4.1.c","vt":"str"},{"t":"eq","v":"1.4.1.d","vt":"str"},{"t":"eq","v":"1.4.1.e","vt":"str"}],"checkall":"true","repair":false,"outputs":5,"x":120,"y":1280,"wires":[["20f493bf.5a551c"],["26d2aac5.f366a6"],["c47717c2.c86ea8"],["68a19c9.5921364"],["5742f756.b36ec8"]]},{"id":"47bc4934.38e028","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":15,"y":1280,"wires":[["fe88fbb6.a6e698"]]},{"id":"3e3dd76.aa83128","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":915,"y":1360,"wires":[]},{"id":"26d2aac5.f366a6","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L512","query":"SELECT non_negative_difference(max(\"Total Produtos(Bruto)\")) FROM \"L512_ENCHEDORA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":360,"y":1280,"wires":[["9be3407d.fa529"]]},{"id":"c47717c2.c86ea8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L512","query":"SELECT non_negative_difference(max(\"Total Produtos(Bruto)\")) FROM \"L512_ENCHEDORA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":360,"y":1320,"wires":[["3f34734a.f2981c"]]},{"id":"68a19c9.5921364","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L512","query":"SELECT non_negative_difference(max(\"Total Produtos(Bruto)\")) FROM \"L512_ENCHEDORA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":360,"y":1360,"wires":[["1cf984b.e1db17b"]]},{"id":"fbd3d672.619e28","type":"function","z":"6267b9e6.8530b8","name":"handle OAE_512","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nvar arr = msg.payload;\nvar linha = '512';\nvar lower_b = 0;\nvar sum_day = 0;\nvar first_day = true;\n\nvar obj = arr[0];\nvar oae = obj['non_negative_difference'];\n\nvar timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n\nvar hour = timestamp.getHours();\nvar hour_converted = pad(hour, 2);\nvar day_curr = timestamp.getDate()\n\nvar wkday = weekday[timestamp.getDay()];\nvar day = pad(day_curr, 2);\nvar mth = pad(month[timestamp.getMonth()], 2);\nvar year = timestamp.getFullYear();\nvar hour_converted = pad(hour, 2);\nvar minutes = pad(timestamp.getMinutes(), 2);\nvar row_timestamp = hour_converted + \":\" + minutes ;\n\nif (oae == 0){\n    var query = 'A OAE do dia ' + day + \"/\" + mth + \"/\" + year +\n    \" (\" +  wkday +\") na linha \" + linha +\" às \" + row_timestamp + \n    \" é de \"+ (oae*100).toFixed(2) + \"%. Por favor, verifique o funcionamento da linha\";\n}\nelse{\n    var query = 'A OAE do dia ' + day + \"/\" + mth + \"/\" + year +\n    \" (\" +  wkday +\") na linha \" + linha +\" às \" + row_timestamp + \n    \" é de \"+ (oae*100).toFixed(2) + \"%\";\n}\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\nnode.warn('Resultado da query: ' + flow.get(\"curr_content\"));\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":150,"y":1400,"wires":[[]]},{"id":"5e68ed47.044fe4","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":744.0276880264282,"y":115.416663646698,"wires":[["b08f802e.40922"]]},{"id":"f81faebb.516ed","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":1114.0276880264282,"y":115.416663646698,"wires":[]},{"id":"b08f802e.40922","type":"function","z":"6267b9e6.8530b8","name":"menu navigation - logistica","func":"if(msg.payload.content in {'2':\"\", '2.1':\"\", '2.1.1':\"\",\n                           '2.2':\"\", '2.2.1':\"\",\n                           '2.3':\"\", '2.3.1':\"\",\n                           '2.4':\"\", '2.4.1':\"\",\n                           '2.5':\"\", '2.5.1':\"\",\n                           '2.6':\"\", '2.6.1':\"\"}){\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":929.0276880264282,"y":115.416663646698,"wires":[["f81faebb.516ed"]]},{"id":"a8c051c0.f7f61","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":744.0276880264282,"y":175.416663646698,"wires":[["6b1e99ab.a347d8"]]},{"id":"1659a41d.169a4c","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":1114.0276880264282,"y":175.416663646698,"wires":[]},{"id":"6b1e99ab.a347d8","type":"function","z":"6267b9e6.8530b8","name":"menu navigation - processos","func":"if(msg.payload.content in {'3':\"\", '3.1':\"\", '3.1.1':\"\",\n                           '3.2':\"\", '3.2.1':\"\",\n                           '3.3':\"\", '3.3.1':\"\",\n                           '3.4':\"\", '3.4.1':\"\",\n                           '3.5':\"\", '3.5.1':\"\",\n                           '3.6':\"\", '3.6.1':\"\"}){\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":929.0276880264282,"y":175.416663646698,"wires":[["1659a41d.169a4c"]]},{"id":"cd625960.7d5278","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":744.0276880264282,"y":235.416663646698,"wires":[["7032d81a.124b28"]]},{"id":"b1918030.28965","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":1114.0276880264282,"y":235.416663646698,"wires":[]},{"id":"7032d81a.124b28","type":"function","z":"6267b9e6.8530b8","name":"menu navigation - utilidades","func":"if(msg.payload.content in {'4':\"\", '4.1':\"\", '4.1.1':\"\",\n                           '4.2':\"\", '4.2.1':\"\",\n                           '4.3':\"\", '4.3.1':\"\",\n                           '4.4':\"\", '4.4.1':\"\",\n                           '4.5':\"\", '4.5.1':\"\",\n                           '4.6':\"\", '4.6.1':\"\"}){\n    return msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":929.0276880264282,"y":235.416663646698,"wires":[["b1918030.28965"]]},{"id":"31c871e1.a4c9be","type":"function","z":"6267b9e6.8530b8","name":"TA_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '501'\nvar query  = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].non_negative_difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        \n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n'+ \"Ou seja,\"+ sum_turno * 0.003+\"hL\" );\n//query = query.concat(\"\\nA produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno A 501\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":480,"wires":[["fca3a75c.2f4b68"]]},{"id":"5bf60c7.a84fbf4","type":"function","z":"6267b9e6.8530b8","name":"TA_PB_L511","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '511'\nvar query = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        \n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' latas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno A 511\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":650,"y":960,"wires":[["d00f10c0.60022"]]},{"id":"140b38e2.3d0587","type":"function","z":"6267b9e6.8530b8","name":"24h_PB_L511","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nvar arr = msg.payload;\nvar linha = '502'\nvar query = '';\nvar lower_b = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n\n    var hour = timestamp.getHours();\n\n    if (hour >= 0 ){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n\n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n    \n    if (hour >= 0 && timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()) {\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);\n    }\n}\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' de 00:00 do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\") até o momento: \\n\\n\";\nquery = query_title.concat(query);\nquery = query.concat(\"\\nA produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"24h 511\");\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":660,"y":1080,"wires":[["d00f10c0.60022"]]},{"id":"262c628.aacae9e","type":"function","z":"6267b9e6.8530b8","name":"TB_PB_L511","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'B'\nvar linha = '511'\nvar query = '';\nvar lower_b = 8;\nvar upper_b = 15;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' latas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno B 511\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":650,"y":1000,"wires":[["d00f10c0.60022"]]},{"id":"8059cf2c.e01be","type":"function","z":"6267b9e6.8530b8","name":"TC_PB_L511","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'C'\nvar linha = '511'\nvar query = '';\nvar lower_b = 16;\nvar upper_b = 23;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' latas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno C 511\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":650,"y":1040,"wires":[["d00f10c0.60022"]]},{"id":"a4e7904e.14c96","type":"function","z":"6267b9e6.8530b8","name":"TA_PB_L512","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '512'\nvar query = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        \n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' latas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno A 512\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":570,"y":1240,"wires":[["3e3dd76.aa83128"]]},{"id":"1cf984b.e1db17b","type":"function","z":"6267b9e6.8530b8","name":"24h_PB_L512","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nvar arr = msg.payload;\nvar linha = '512'\nvar query = '';\nvar lower_b = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n\n    var hour = timestamp.getHours();\n\n    if (hour >= 0 ){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n\n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n    \n    if (hour >= 0 && timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()) {\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);\n    }\n}\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' de 00:00 do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\") até o momento: \\n\\n\";\nquery = query_title.concat(query);\nquery = query.concat(\"\\nA produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"24h 512\");\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":580,"y":1360,"wires":[["3e3dd76.aa83128"]]},{"id":"9be3407d.fa529","type":"function","z":"6267b9e6.8530b8","name":"TB_PB_L512","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'B'\nvar linha = '512'\nvar query = '';\nvar lower_b = 8;\nvar upper_b = 15;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' latas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno B 512\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":570,"y":1280,"wires":[["3e3dd76.aa83128"]]},{"id":"3f34734a.f2981c","type":"function","z":"6267b9e6.8530b8","name":"TC_PB_L512","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'C'\nvar linha = '512'\nvar query = '';\nvar lower_b = 16;\nvar upper_b = 23;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\n\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' latas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' latas.\\n\\n');\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" latas.\");\n\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno C 512\");\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":580,"y":1320,"wires":[["3e3dd76.aa83128"]]},{"id":"13628770.5869e9","type":"switch","z":"6267b9e6.8530b8","name":"adegas od_111_123","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"3.1.1.1","vt":"str"},{"t":"eq","v":"3.1.1.2","vt":"str"},{"t":"eq","v":"3.1.1.3","vt":"str"},{"t":"eq","v":"3.1.1.4","vt":"str"},{"t":"eq","v":"3.1.1.5","vt":"str"},{"t":"eq","v":"3.1.1.6","vt":"str"},{"t":"eq","v":"3.1.1.7","vt":"str"},{"t":"eq","v":"3.1.1.8","vt":"str"},{"t":"eq","v":"3.1.1.9","vt":"str"},{"t":"eq","v":"3.1.1.10","vt":"str"},{"t":"eq","v":"3.1.1.11","vt":"str"},{"t":"eq","v":"3.1.1.12","vt":"str"},{"t":"eq","v":"3.1.1.13","vt":"str"},{"t":"eq","v":"3.1.1.14","vt":"str"},{"t":"eq","v":"3.1.1.15","vt":"str"},{"t":"eq","v":"3.1.1.16","vt":"str"},{"t":"eq","v":"3.1.1.17","vt":"str"},{"t":"eq","v":"3.1.1.18","vt":"str"},{"t":"eq","v":"3.1.1.19","vt":"str"}],"checkall":"true","repair":false,"outputs":19,"x":160,"y":1740,"wires":[["390ef02b.77155"],["fb40eb98.335028"],["95fb47d0.96b888"],["2e6bae82.71ffb2"],["7fd44989.0a25e8"],["5f2c7c1d.c83b24"],["b383f276.5bf11"],["4e64e8f3.2574f8"],["f086b61a.d31e38"],["fa81c088.cd009"],["9f54b32b.082c5"],["d6308d67.f5678"],["eb9403b8.7ea07"],["e51d0679.040b78"],["f3b8bbc4.5a2ec8"],["106dc6c9.66e0e9"],["f764822b.73968"],["a6fd94dd.024778"],["f7fdef17.3d56a"]]},{"id":"390ef02b.77155","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD111","query":"SELECT last(\"VOLD111CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD111.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D111TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD111\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1540,"wires":[["bcf57251.bbc98"]]},{"id":"ad47970e.aaa348","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L512","query":"SELECT difference(max(\"Total Produtos(Bruto)\")) FROM \"L512_ENCHEDORA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":120,"y":1360,"wires":[[]]},{"id":"bcf57251.bbc98","type":"function","z":"6267b9e6.8530b8","name":"od111","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD111 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1540,"wires":[["c85fc3b4.11fc7"]]},{"id":"c85fc3b4.11fc7","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":755,"y":1760,"wires":[]},{"id":"830623ef.d64ab","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":15,"y":1740,"wires":[["13628770.5869e9"]]},{"id":"b1fa73f5.9571d","type":"debug","z":"6267b9e6.8530b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1270,"y":200,"wires":[]},{"id":"fb40eb98.335028","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD112","query":"SELECT last(\"VOLD112CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD112.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D112TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD112\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1580,"wires":[["b7929b2f.1deb08"]]},{"id":"95fb47d0.96b888","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD113","query":"SELECT last(\"VOLD113CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD113.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D113TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD113\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1620,"wires":[["5340dd78.a95b84"]]},{"id":"2e6bae82.71ffb2","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD114","query":"SELECT last(\"VOLD114CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD114.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D114TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD114\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1660,"wires":[["cea45655.1e2088"]]},{"id":"7fd44989.0a25e8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD115","query":"SELECT last(\"VOLD115CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD115.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D115TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD115\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1700,"wires":[["71e61bd8.93d654"]]},{"id":"5f2c7c1d.c83b24","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD116","query":"SELECT last(\"VOLD116CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD116.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D116TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD116\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1740,"wires":[["c5ae167.258bbe8"]]},{"id":"b7929b2f.1deb08","type":"function","z":"6267b9e6.8530b8","name":"od112","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD112 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1580,"wires":[["c85fc3b4.11fc7"]]},{"id":"5340dd78.a95b84","type":"function","z":"6267b9e6.8530b8","name":"od113","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD113 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1620,"wires":[["c85fc3b4.11fc7"]]},{"id":"cea45655.1e2088","type":"function","z":"6267b9e6.8530b8","name":"od114","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD114 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1660,"wires":[["c85fc3b4.11fc7"]]},{"id":"71e61bd8.93d654","type":"function","z":"6267b9e6.8530b8","name":"od115","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD115 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1700,"wires":[["c85fc3b4.11fc7"]]},{"id":"c5ae167.258bbe8","type":"function","z":"6267b9e6.8530b8","name":"od116","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD116 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1740,"wires":[["c85fc3b4.11fc7"]]},{"id":"84deedf3.3f743","type":"function","z":"6267b9e6.8530b8","name":"od117","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD117 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1780,"wires":[["c85fc3b4.11fc7"]]},{"id":"b383f276.5bf11","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD117","query":"SELECT last(\"VOLD117CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD117.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D117TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD117\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1780,"wires":[["84deedf3.3f743"]]},{"id":"4e64e8f3.2574f8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD118","query":"SELECT last(\"VOLD118CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD118.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D118TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD118\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1820,"wires":[["e177f550.466738"]]},{"id":"f086b61a.d31e38","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD119","query":"SELECT last(\"VOLD119CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD119.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D119TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD119\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":1860,"wires":[["fd42d594.0e2998"]]},{"id":"fa81c088.cd009","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD121","query":"SELECT last(\"VOLD121CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD121.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D121TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD121\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":1900,"wires":[["d98e158b.9ce8b8"]]},{"id":"9f54b32b.082c5","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD122","query":"SELECT last(\"VOLD122CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD122.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D122TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD122\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":1940,"wires":[["1c7c4e72.44bc22"]]},{"id":"d6308d67.f5678","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD123","query":"SELECT last(\"VOLD123CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD123.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D123TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD123\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":1980,"wires":[["8830569b.fcaed8"]]},{"id":"e177f550.466738","type":"function","z":"6267b9e6.8530b8","name":"od118","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD118 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1820,"wires":[["c85fc3b4.11fc7"]]},{"id":"fd42d594.0e2998","type":"function","z":"6267b9e6.8530b8","name":"od119","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD119 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1860,"wires":[["c85fc3b4.11fc7"]]},{"id":"d98e158b.9ce8b8","type":"function","z":"6267b9e6.8530b8","name":"od121","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD121 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1900,"wires":[["c85fc3b4.11fc7"]]},{"id":"1c7c4e72.44bc22","type":"function","z":"6267b9e6.8530b8","name":"od122","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD122 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1940,"wires":[["c85fc3b4.11fc7"]]},{"id":"8830569b.fcaed8","type":"function","z":"6267b9e6.8530b8","name":"od123","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD123 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":550,"y":1980,"wires":[["c85fc3b4.11fc7"]]},{"id":"8247902c.953df","type":"switch","z":"6267b9e6.8530b8","name":"adegas od_124_136","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"3.2.1.1","vt":"str"},{"t":"eq","v":"3.2.1.2","vt":"str"},{"t":"eq","v":"3.2.1.3","vt":"str"},{"t":"eq","v":"3.2.1.4","vt":"str"},{"t":"eq","v":"3.2.1.5","vt":"str"},{"t":"eq","v":"3.2.1.6","vt":"str"},{"t":"eq","v":"3.2.1.7","vt":"str"},{"t":"eq","v":"3.2.1.8","vt":"str"},{"t":"eq","v":"3.2.1.9","vt":"str"},{"t":"eq","v":"3.2.1.10","vt":"str"},{"t":"eq","v":"3.2.1.11","vt":"str"},{"t":"eq","v":"3.2.1.12","vt":"str"},{"t":"eq","v":"3.2.1.13","vt":"str"}],"checkall":"true","repair":false,"outputs":13,"x":960,"y":1840,"wires":[["ec09b7cd.10df08"],["76b659fa.d78af8"],["d93afc30.73b71"],["e5c2ba94.b6ce98"],["569c674.1dd3598"],["ac5b4e9a.3429"],["e5b93cc8.906d1"],["a7d8e4a6.de03b8"],["f0fa8565.45fd98"],["c039132e.76797"],["ff4ccf9f.1f363"],["bd7e8f04.5919d"],["b6beb76c.04a4a8"]]},{"id":"ec09b7cd.10df08","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD124","query":"SELECT last(\"VOLD124CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD124.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D124TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD124\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1580,"wires":[["a1baefa0.4843d"]]},{"id":"a1baefa0.4843d","type":"function","z":"6267b9e6.8530b8","name":"od124","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD124 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1580,"wires":[["3c3b80e3.d5c1"]]},{"id":"3c3b80e3.d5c1","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":1575,"y":1800,"wires":[]},{"id":"b7aabc54.9f91","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":815,"y":1760,"wires":[["8247902c.953df"]]},{"id":"76b659fa.d78af8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD125","query":"SELECT last(\"VOLD125CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD125.PT02\") FROM \"Adegas_OD\" WHERE time >= now() -1m GROUP BY time(5m) fill(null);SELECT last(\"D125TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD125\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1620,"wires":[["278fff1e.52b68"]]},{"id":"d93afc30.73b71","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD126","query":"SELECT last(\"VOLD126CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD126.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D126TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD126\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1660,"wires":[["1e42332c.0f4c5d"]]},{"id":"e5c2ba94.b6ce98","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD127","query":"SELECT last(\"VOLD127CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD127.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D127TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD127\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1700,"wires":[["81fa8770.ecb4b8"]]},{"id":"569c674.1dd3598","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD128","query":"SELECT last(\"VOLD128CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD128.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D128TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD128\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1740,"wires":[["a6a3d272.8fafd"]]},{"id":"ac5b4e9a.3429","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD129","query":"SELECT last(\"VOLD129CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD129.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D129TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD129\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1780,"wires":[["90a12370.602ab"]]},{"id":"278fff1e.52b68","type":"function","z":"6267b9e6.8530b8","name":"od125","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD125 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1620,"wires":[["3c3b80e3.d5c1"]]},{"id":"1e42332c.0f4c5d","type":"function","z":"6267b9e6.8530b8","name":"od126","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD126 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1660,"wires":[["3c3b80e3.d5c1"]]},{"id":"81fa8770.ecb4b8","type":"function","z":"6267b9e6.8530b8","name":"od127","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD127 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1700,"wires":[["3c3b80e3.d5c1"]]},{"id":"a6a3d272.8fafd","type":"function","z":"6267b9e6.8530b8","name":"od128","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD128 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1740,"wires":[["3c3b80e3.d5c1"]]},{"id":"90a12370.602ab","type":"function","z":"6267b9e6.8530b8","name":"od129","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD129 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1780,"wires":[["3c3b80e3.d5c1"]]},{"id":"11234c4f.322994","type":"function","z":"6267b9e6.8530b8","name":"od131","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD131 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1820,"wires":[["3c3b80e3.d5c1"]]},{"id":"e5b93cc8.906d1","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD131","query":"SELECT last(\"VOLD131CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD131.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D131TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD131\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1820,"wires":[["11234c4f.322994"]]},{"id":"a7d8e4a6.de03b8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD132","query":"SELECT last(\"VOLD132CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD132.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D132TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD132\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1860,"wires":[["12c096a2.d32d79"]]},{"id":"f0fa8565.45fd98","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD133","query":"SELECT last(\"VOLD133CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD133.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D133TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD133\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1900,"wires":[["a858f810.2513e8"]]},{"id":"c039132e.76797","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD134","query":"SELECT last(\"VOLD134CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD134.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D134TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD134\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1940,"wires":[["64099fbd.bf4f4"]]},{"id":"ff4ccf9f.1f363","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD135","query":"SELECT last(\"VOLD135CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD135.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D135TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD135\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":1980,"wires":[["99f188ab.a720c8"]]},{"id":"bd7e8f04.5919d","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD136","query":"SELECT last(\"VOLD136CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD136.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D136TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD136\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":1200,"y":2020,"wires":[["b524cec3.ed97b"]]},{"id":"12c096a2.d32d79","type":"function","z":"6267b9e6.8530b8","name":"od132","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD131 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1860,"wires":[["3c3b80e3.d5c1"]]},{"id":"a858f810.2513e8","type":"function","z":"6267b9e6.8530b8","name":"od133","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD133 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1900,"wires":[["3c3b80e3.d5c1"]]},{"id":"64099fbd.bf4f4","type":"function","z":"6267b9e6.8530b8","name":"od134","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD134 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1940,"wires":[["3c3b80e3.d5c1"]]},{"id":"99f188ab.a720c8","type":"function","z":"6267b9e6.8530b8","name":"od135","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD135 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":1980,"wires":[["3c3b80e3.d5c1"]]},{"id":"b524cec3.ed97b","type":"function","z":"6267b9e6.8530b8","name":"od136","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD136 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1370,"y":2020,"wires":[["3c3b80e3.d5c1"]]},{"id":"9e3d3d25.1b7be","type":"switch","z":"6267b9e6.8530b8","name":"adegas od_137_149","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"3.3.1.1","vt":"str"},{"t":"eq","v":"3.3.1.2","vt":"str"},{"t":"eq","v":"3.3.1.3","vt":"str"},{"t":"eq","v":"3.3.1.4","vt":"str"},{"t":"eq","v":"3.3.1.5","vt":"str"},{"t":"eq","v":"3.3.1.6","vt":"str"},{"t":"eq","v":"3.3.1.7","vt":"str"},{"t":"eq","v":"3.3.1.8","vt":"str"},{"t":"eq","v":"3.3.1.9","vt":"str"},{"t":"eq","v":"3.3.1.10","vt":"str"},{"t":"eq","v":"3.3.1.11","vt":"str"},{"t":"eq","v":"3.3.1.12","vt":"str"},{"t":"eq","v":"3.3.1.13","vt":"str"}],"checkall":"true","repair":false,"outputs":13,"x":1820,"y":1740,"wires":[["39af9026.333d4"],["aa4a8066.4612c"],["91e4e483.9a7118"],["9a972542.d82178"],["1affc023.fd093"],["4e12d19d.a6d6c"],["51e74033.72d5f"],["2ced4a28.64f9c6"],["76ee9618.525678"],["ae20b9e8.9870c8"],["df6d520f.66b62"],["90f5bdc3.dfe7a"],["c4ce3738.5128c8"]]},{"id":"39af9026.333d4","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD137","query":"SELECT last(\"VOLD137CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD137.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D137TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD137\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1560,"wires":[["60551790.2f7d78"]]},{"id":"60551790.2f7d78","type":"function","z":"6267b9e6.8530b8","name":"od137","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD137 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1560,"wires":[["e28ac576.fe51a8"]]},{"id":"e28ac576.fe51a8","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":2435,"y":1780,"wires":[]},{"id":"7a3827f2.553088","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":1655,"y":1660,"wires":[["9e3d3d25.1b7be"]]},{"id":"aa4a8066.4612c","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD138","query":"SELECT last(\"VOLD138CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD138.PT02\") FROM \"Adegas_OD\" WHERE time >= now() -1m GROUP BY time(5m) fill(null);SELECT last(\"D138TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD138\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1600,"wires":[["a7d6a7e6.cf61c8"]]},{"id":"91e4e483.9a7118","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD139","query":"SELECT last(\"VOLD139CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD139.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D139TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD139\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1640,"wires":[["980412e3.e81c9"]]},{"id":"9a972542.d82178","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD141","query":"SELECT last(\"VOLD141CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD141.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D141TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD141\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1680,"wires":[["17eed651.610a5a"]]},{"id":"1affc023.fd093","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD142","query":"SELECT last(\"VOLD142CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD142.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D142TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD142\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1720,"wires":[["4703a592.8b49fc"]]},{"id":"4e12d19d.a6d6c","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD143","query":"SELECT last(\"VOLD143CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD143.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D143TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD143\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1760,"wires":[["2647dcee.2ec6b4"]]},{"id":"a7d6a7e6.cf61c8","type":"function","z":"6267b9e6.8530b8","name":"od138","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD138 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1600,"wires":[["e28ac576.fe51a8"]]},{"id":"980412e3.e81c9","type":"function","z":"6267b9e6.8530b8","name":"od139","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD139 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1640,"wires":[["e28ac576.fe51a8"]]},{"id":"17eed651.610a5a","type":"function","z":"6267b9e6.8530b8","name":"od141","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD141 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1680,"wires":[["e28ac576.fe51a8"]]},{"id":"4703a592.8b49fc","type":"function","z":"6267b9e6.8530b8","name":"od142","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n    tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD142 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1720,"wires":[["e28ac576.fe51a8"]]},{"id":"2647dcee.2ec6b4","type":"function","z":"6267b9e6.8530b8","name":"od143","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD143 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1760,"wires":[["e28ac576.fe51a8"]]},{"id":"6ec2e61f.9e9ca8","type":"function","z":"6267b9e6.8530b8","name":"od144","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD144 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1800,"wires":[["e28ac576.fe51a8"]]},{"id":"51e74033.72d5f","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD144","query":"SELECT last(\"VOLD144CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD144.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D144TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD144\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1800,"wires":[["6ec2e61f.9e9ca8"]]},{"id":"2ced4a28.64f9c6","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD145","query":"SELECT last(\"VOLD145CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD145.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D145TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD145\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1840,"wires":[["88f9098f.3a8a48"]]},{"id":"76ee9618.525678","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD146","query":"SELECT last(\"VOLD146CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD146.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D146TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD146\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1880,"wires":[["1da6c34.abce43d"]]},{"id":"ae20b9e8.9870c8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD147","query":"SELECT last(\"VOLD147CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD147.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D147TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD147\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1920,"wires":[["b5317278.6f753"]]},{"id":"df6d520f.66b62","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD148","query":"SELECT last(\"VOLD148CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD148.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D148TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD148\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":1960,"wires":[["7159e98b.f40148"]]},{"id":"90f5bdc3.dfe7a","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"OD149","query":"SELECT last(\"VOLD149CAL\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"OD149.PT02\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"D149TT01IC\")  / 10 FROM \"Adegas_1\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"TIPOCERVD149\") FROM \"Adegas_OD\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2060,"y":2000,"wires":[["ba510cfc.b9993"]]},{"id":"88f9098f.3a8a48","type":"function","z":"6267b9e6.8530b8","name":"od145","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD145 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1840,"wires":[["e28ac576.fe51a8"]]},{"id":"1da6c34.abce43d","type":"function","z":"6267b9e6.8530b8","name":"od146","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD146 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1880,"wires":[["e28ac576.fe51a8"]]},{"id":"b5317278.6f753","type":"function","z":"6267b9e6.8530b8","name":"od147","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD147 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1920,"wires":[["e28ac576.fe51a8"]]},{"id":"7159e98b.f40148","type":"function","z":"6267b9e6.8530b8","name":"od148","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD148 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":1960,"wires":[["e28ac576.fe51a8"]]},{"id":"ba510cfc.b9993","type":"function","z":"6267b9e6.8530b8","name":"od149","func":"var volume= msg.payload[0][0].last\nvar pressao=msg.payload[1][0].last.toFixed(2)\nvar tt=msg.payload[2][0].last\nvar sku= msg.payload[3][1].last\n\n//function sku###################################################\nif (sku == \"19\"){\n    tipo_cerv=\"CVR\"\n}\nelse if (sku==\"0\"){\n    tipo_cerv=\"Vazio\"\n}\nelse if (sku==\"1\"){\n    tipo_cerv=\"BRAHMA\"\n}\n\nelse if (sku==\"2\"){\n    tipo_cerv=\"SKOL\"\n}\nelse if (sku==\"3\"){\n    tipo_cerv=\"ANTARTICA\"\n}\nelse if (sku==\"4\"){\n    tipo_cerv=\"SKOL PURO MALTE\"\n}\nelse if (sku==\"5\"){\n   tipo_cerv=\"BOHEMIA\"\n}\nelse if (sku==\"7\"){\n     tipo_cerv=\"SUB-ZERO\"\n}\nelse if (sku==\"11\"){\n    tipo_cerv=\"BRAHMA DUPLO MALTE\"\n}\nelse if (sku==\"20\"){\n    tipo_cerv=\"OD-R\"\n}\n///############################################################\nquery = (\"\\n O volume do OD149 é de \" + volume +\"hL.\\n\" + \"A pressão está em \" + pressao + \" Bar.\\n\" + \"A temperatura \"+ tt +\"°C.\\n\"+\"O SKU é: \" +tipo_cerv+\".\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2230,"y":2000,"wires":[["e28ac576.fe51a8"]]},{"id":"eb9403b8.7ea07","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"adegas_pressao","query":"SELECT top(\"TP111LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP112LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP113LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP114LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP115LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP121LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP122LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP123LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP124LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP125LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null); SELECT top(\"F111PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F112PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F113PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F114PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F115PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F121PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F122PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F123PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F124PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F125PT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F111TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F112TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F113TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F114TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F115TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F121TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F122TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F123TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F124TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null); SELECT top(\"F125TT01\",3)  / 100 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null);    SELECT top(\"F111TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F112TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F113TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F114TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F115TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F121TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F122TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F123TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F124TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null); SELECT top(\"F125TIPOCERV\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(2s) fill(null);","rawOutput":false,"precision":"h","retentionPolicy":"","x":410,"y":2020,"wires":[["9d985236.b9c74"]]},{"id":"f3ac1799.34f8c8","type":"switch","z":"6267b9e6.8530b8","name":"adegas_pressão","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"3.5.1","vt":"str"},{"t":"eq","v":"3.5.2","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":210,"y":2340,"wires":[[],["95d63be6.599058"]]},{"id":"9fd3dff2.293c6","type":"link in","z":"6267b9e6.8530b8","name":"","links":["75aae4f4.48f38c"],"x":15,"y":2260,"wires":[["f3ac1799.34f8c8","1c64b117.c12d2f"]]},{"id":"9d985236.b9c74","type":"function","z":"6267b9e6.8530b8","name":"info_adegas_pressao","func":"\nvar volume_TP111= msg.payload[0][0].top\nvar volume_TP112= msg.payload[1][0].top\nvar volume_TP113= msg.payload[2][0].top\nvar volume_TP114= msg.payload[3][0].top\nvar volume_TP115= msg.payload[4][0].top\nvar volume_TP121= msg.payload[5][0].top\nvar volume_TP122= msg.payload[6][0].top\nvar volume_TP123= msg.payload[7][0].top\nvar volume_TP124= msg.payload[8][0].top\nvar volume_TP125= msg.payload[9][0].top\nvar volume_tot=msg.payload[0][0].top+msg.payload[1][0].top+msg.payload[2][0].top+msg.payload[3][0].top+msg.payload[4][0].top+msg.payload[5][0].top+msg.payload[6][0].top+msg.payload[7][0].top+msg.payload[8][0].top+msg.payload[9][0].top\n\n//var tipos de produtos#####################\n\nvar sku_TP111= msg.payload[30][0].top\nvar sku_TP112= msg.payload[31][0].top\nvar sku_TP113= msg.payload[32][0].top\nvar sku_TP114= msg.payload[33][0].top\nvar sku_TP115= msg.payload[34][0].top\nvar sku_TP121= msg.payload[35][0].top\nvar sku_TP122= msg.payload[36][0].top\nvar sku_TP123= msg.payload[37][0].top\nvar sku_TP124= msg.payload[38][0].top\nvar sku_TP125= msg.payload[39][0].top\n\n//pressão do TPs#################################################\n\nvar pressao_TP111=msg.payload[10][0].top\nvar pressao_TP112=msg.payload[11][0].top\nvar pressao_TP113=msg.payload[12][0].top\nvar pressao_TP114=msg.payload[13][0].top\nvar pressao_TP115=msg.payload[14][0].top\nvar pressao_TP121=msg.payload[15][0].top\nvar pressao_TP122=msg.payload[16][0].top\nvar pressao_TP123=msg.payload[17][0].top\nvar pressao_TP124=msg.payload[18][0].top\nvar pressao_TP125=msg.payload[19][0].top\n\n//var temperatura do TPs#####################\nvar temperatura_TP111= msg.payload[20][0].top\nvar temperatura_TP112= msg.payload[21][0].top\nvar temperatura_TP113= msg.payload[22][0].top\nvar temperatura_TP114= msg.payload[23][0].top\nvar temperatura_TP115= msg.payload[23][0].top\nvar temperatura_TP121= msg.payload[24][0].top\nvar temperatura_TP122= msg.payload[25][0].top\nvar temperatura_TP123= msg.payload[26][0].top\nvar temperatura_TP124= msg.payload[27][0].top\nvar temperatura_TP125= msg.payload[29][0].top\n\n\n\n//function sku TP###################################################\nif (sku_TP111  ==\"1\"){\n    tipo_cerv_TP111 = \"Chopp\"\n}\nelse if (sku_TP111 ==\"10\"){\n     tipo_cerv_TP111=\"Brahma Retornável\"\n}\n\nelse if (sku_TP111 ==\"11\"){\n     tipo_cerv_TP111=\"Brahma Lata\"\n}\n\nelse if (sku_TP111 ==\"20\"){\n     tipo_cerv_TP111=\"SKOL Retornável\"\n}\nelse if (sku_TP111 ==\"21\"){\n     tipo_cerv_TP111=\"SKOL Lata\"\n}\nelse if (sku_TP111 ==\"30\"){\n     tipo_cerv_TP111=\"Antártica Retornável\"\n}\nelse if (sku_TP111 ==\"31\"){\n    tipo_cerv_TP111=\"Antártica Lata\"\n}\nelse if (sku_TP111 ==\"50\"){\n      tipo_cerv_TP111=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP111 ==\"51\"){\n     tipo_cerv_TP111=\"Sub-Zero Lata\"\n}\nelse if (sku_TP111 ==\"60\"){\n     tipo_cerv_TP111=\"Bhoemia Retornável\"\n}\nelse if (sku_TP111==\"61\"){\n     tipo_cerv_TP111=\"Bhoemia Lata\"\n}\nelse if (sku_TP111 ==\"70\"){\n      tipo_cerv_TP111=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP111 ==\"71\"){\n     tipo_cerv_TP111=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP111 ==\"80\"){\n     tipo_cerv_TP111=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP111 ==\"81\"){\n     tipo_cerv_TP111=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP111 ==\"90\"){\n     tipo_cerv_TP111=\"Original Retornável\"\n}\nelse if (sku_TP111 ==\"91\"){\n     tipo_cerv_TP111=\"Original Lata\"\n}\nelse if (sku_TP111 ==\"0\"){\n     tipo_cerv_TP111=\"Vazio\"\n}\n\n///############################################################\nif (sku_TP112  ==\"1\"){\n    tipo_cerv_TP112 = \"Chopp\"\n}\nelse if (sku_TP112 ==\"10\"){\n     tipo_cerv_TP112=\"Brahma Retornável\"\n}\n\nelse if (sku_TP112 ==\"11\"){\n     tipo_cerv_TP112=\"Brahma Lata\"\n}\n\nelse if (sku_TP112 ==\"20\"){\n     tipo_cerv_TP112=\"SKOL Retornável\"\n}\nelse if (sku_TP112 ==\"21\"){\n     tipo_cerv_TP112=\"SKOL Lata\"\n}\nelse if (sku_TP112 ==\"30\"){\n    tipo_cerv_TP112=\"Antártica Retornável\"\n}\nelse if (sku_TP112 ==\"31\"){\n   tipo_cerv_TP112=\"Antártica Lata\"\n}\nelse if (sku_TP112 ==\"50\"){\n     tipo_cerv_TP112=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP112 ==\"51\"){\n    tipo_cerv_TP112=\"Sub-Zero Lata\"\n}\nelse if (sku_TP112 ==\"60\"){\n    tipo_cerv_TP112=\"Bhoemia Retornável\"\n}\nelse if (sku_TP112==\"61\"){\n    tipo_cerv_TP112=\"Bhoemia Lata\"\n}\nelse if (sku_TP112 ==\"70\"){\n    tipo_cerv_TP112=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP112 ==\"71\"){\n    tipo_cerv_TP112=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP112 ==\"80\"){\n    tipo_cerv_TP112=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP112 ==\"81\"){\n    tipo_cerv_TP112=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP112 ==\"90\"){\n    tipo_cerv_TP112=\"Original Retornável\"\n}\nelse if (sku_TP112 ==\"91\"){\n    tipo_cerv_TP112=\"Original Lata\"\n}\nelse if (sku_TP112 ==\"0\"){\n     tipo_cerv_TP112=\"Vazio\"\n}\n//////////////////////////////////////////////////////////////////\nif (sku_TP113  ==\"1\"){\n    tipo_cerv_TP113 = \"Chopp\"\n}\nelse if (sku_TP113 ==\"10\"){\n     tipo_cerv_TP113=\"Brahma Retornável\"\n}\n\nelse if (sku_TP113 ==\"11\"){\n     tipo_cerv_TP113=\"Brahma Lata\"\n}\n\nelse if (sku_TP113 ==\"20\"){\n     tipo_cerv_TP113=\"SKOL Retornável\"\n}\nelse if (sku_TP113 ==\"21\"){\n     tipo_cerv_TP113=\"SKOL Lata\"\n}\nelse if (sku_TP113 ==\"30\"){\n    tipo_cerv_TP113=\"Antártica Retornável\"\n}\nelse if (sku_TP113 ==\"31\"){\n   tipo_cerv_TP113=\"Antártica Lata\"\n}\nelse if (sku_TP113 ==\"50\"){\n     tipo_cerv_TP113=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP113 ==\"51\"){\n    tipo_cerv_TP113=\"Sub-Zero Lata\"\n}\nelse if (sku_TP113 ==\"60\"){\n    tipo_cerv_TP113=\"Bhoemia Retornável\"\n}\nelse if (sku_TP113==\"61\"){\n    tipo_cerv_TP113=\"Bhoemia Lata\"\n}\nelse if (sku_TP113 ==\"70\"){\n    tipo_cerv_TP113=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP113 ==\"71\"){\n    tipo_cerv_TP113=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP113 ==\"80\"){\n    tipo_cerv_TP113=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP113 ==\"81\"){\n    tipo_cerv_TP113=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP113 ==\"90\"){\n    tipo_cerv_TP113=\"Original Retornável\"\n}\nelse if (sku_TP113 ==\"91\"){\n    tipo_cerv_TP113=\"Original Lata\"\n}\nelse if (sku_TP113 ==\"0\"){\n     tipo_cerv_TP113=\"Vazio\"\n}\n////////////////////////////////////////////////////////////////////////////\nif (sku_TP114  ==\"1\"){\n    tipo_cerv_TP114 = \"Chopp\"\n}\nelse if (sku_TP114 ==\"10\"){\n     tipo_cerv_TP114=\"Brahma Retornável\"\n}\n\nelse if (sku_TP114 ==\"11\"){\n     tipo_cerv_TP114=\"Brahma Lata\"\n}\n\nelse if (sku_TP114 ==\"20\"){\n     tipo_cerv_TP114=\"SKOL Retornável\"\n}\nelse if (sku_TP114 ==\"21\"){\n     tipo_cerv_TP114=\"SKOL Lata\"\n}\nelse if (sku_TP114 ==\"30\"){\n    tipo_cerv_TP114=\"Antártica Retornável\"\n}\nelse if (sku_TP114 ==\"31\"){\n   tipo_cerv_TP114=\"Antártica Lata\"\n}\nelse if (sku_TP114 ==\"50\"){\n     tipo_cerv_TP114=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP114 ==\"51\"){\n    tipo_cerv_TP114=\"Sub-Zero Lata\"\n}\nelse if (sku_TP114 ==\"60\"){\n    tipo_cerv_TP114=\"Bhoemia Retornável\"\n}\nelse if (sku_TP114==\"61\"){\n    tipo_cerv_TP114=\"Bhoemia Lata\"\n}\nelse if (sku_TP114 ==\"70\"){\n    tipo_cerv_TP114=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP114 ==\"71\"){\n    tipo_cerv_TP114=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP114 ==\"80\"){\n    tipo_cerv_TP114=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP114 ==\"81\"){\n    tipo_cerv_TP114=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP114 ==\"90\"){\n    tipo_cerv_TP114=\"Original Retornável\"\n}\nelse if (sku_TP114 ==\"91\"){\n    tipo_cerv_TP114=\"Original Lata\"\n}\nelse if (sku_TP114 ==\"0\"){\n     tipo_cerv_TP114=\"Vazio\"\n}\n/////////////////////////////////////////////////////////////////////////\nif (sku_TP115  ==\"1\"){\n    tipo_cerv_TP115 = \"Chopp\"\n}\nelse if (sku_TP115 ==\"10\"){\n     tipo_cerv_TP115=\"Brahma Retornável\"\n}\n\nelse if (sku_TP115 ==\"11\"){\n     tipo_cerv_TP115=\"Brahma Lata\"\n}\n\nelse if (sku_TP115 ==\"20\"){\n     tipo_cerv_TP115=\"SKOL Retornável\"\n}\nelse if (sku_TP115 ==\"21\"){\n     tipo_cerv_TP115=\"SKOL Lata\"\n}\nelse if (sku_TP115 ==\"30\"){\n    tipo_cerv_TP115=\"Antártica Retornável\"\n}\nelse if (sku_TP115 ==\"31\"){\n   tipo_cerv_TP115=\"Antártica Lata\"\n}\nelse if (sku_TP115 ==\"50\"){\n     tipo_cerv_TP115=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP115 ==\"51\"){\n    tipo_cerv_TP115=\"Sub-Zero Lata\"\n}\nelse if (sku_TP115 ==\"60\"){\n    tipo_cerv_TP115=\"Bhoemia Retornável\"\n}\nelse if (sku_TP115==\"61\"){\n    tipo_cerv_TP115=\"Bhoemia Lata\"\n}\nelse if (sku_TP115 ==\"70\"){\n    tipo_cerv_TP115=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP115 ==\"71\"){\n    tipo_cerv_TP115=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP115 ==\"80\"){\n    tipo_cerv_TP115=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP115 ==\"81\"){\n    tipo_cerv_TP115=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP115 ==\"90\"){\n    tipo_cerv_TP115=\"Original Retornável\"\n}\nelse if (sku_TP115 ==\"91\"){\n    tipo_cerv_TP115=\"Original Lata\"\n}\nelse if (sku_TP115 ==\"0\"){\n     tipo_cerv_TP115=\"Vazio\"\n}\n///////////////////////////////////////////////////////////////////////////////\nif (sku_TP121  ==\"1\"){\n    tipo_cerv_TP121 = \"Chopp\"\n}\nelse if (sku_TP121 ==\"10\"){\n     tipo_cerv_TP121=\"Brahma Retornável\"\n}\n\nelse if (sku_TP121 ==\"11\"){\n     tipo_cerv_TP121=\"Brahma Lata\"\n}\n\nelse if (sku_TP121 ==\"20\"){\n     tipo_cerv_TP121=\"SKOL Retornável\"\n}\nelse if (sku_TP121 ==\"21\"){\n     tipo_cerv_TP121=\"SKOL Lata\"\n}\nelse if (sku_TP121 ==\"30\"){\n    tipo_cerv_TP121=\"Antártica Retornável\"\n}\nelse if (sku_TP121 ==\"31\"){\n   tipo_cerv_TP121=\"Antártica Lata\"\n}\nelse if (sku_TP121 ==\"50\"){\n     tipo_cerv_TP121=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP121 ==\"51\"){\n    tipo_cerv_TP121=\"Sub-Zero Lata\"\n}\nelse if (sku_TP121 ==\"60\"){\n    tipo_cerv_TP121=\"Bhoemia Retornável\"\n}\nelse if (sku_TP121==\"61\"){\n    tipo_cerv_TP121=\"Bhoemia Lata\"\n}\nelse if (sku_TP121 ==\"70\"){\n    tipo_cerv_TP121=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP121 ==\"71\"){\n    tipo_cerv_TP121=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP121 ==\"80\"){\n    tipo_cerv_TP121=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP121 ==\"81\"){\n    tipo_cerv_TP121=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP121 ==\"90\"){\n    tipo_cerv_TP121=\"Original Retornável\"\n}\nelse if (sku_TP121 ==\"91\"){\n    tipo_cerv_TP121=\"Original Lata\"\n}\nelse if (sku_TP121 ==\"0\"){\n     tipo_cerv_TP121=\"Vazio\"\n}\n////////////////////////////////////////////////////////////////////////////\nif (sku_TP122  ==\"1\"){\n    tipo_cerv_TP122 = \"Chopp\"\n}\nelse if (sku_TP122 ==\"10\"){\n     tipo_cerv_TP122=\"Brahma Retornável\"\n}\n\nelse if (sku_TP122 ==\"11\"){\n     tipo_cerv_TP122=\"Brahma Lata\"\n}\n\nelse if (sku_TP122 ==\"20\"){\n     tipo_cerv_TP122=\"SKOL Retornável\"\n}\nelse if (sku_TP122 ==\"21\"){\n     tipo_cerv_TP122=\"SKOL Lata\"\n}\nelse if (sku_TP122 ==\"30\"){\n    tipo_cerv_TP122=\"Antártica Retornável\"\n}\nelse if (sku_TP122 ==\"31\"){\n   tipo_cerv_TP122=\"Antártica Lata\"\n}\nelse if (sku_TP122 ==\"50\"){\n     tipo_cerv_TP122=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP122 ==\"51\"){\n    tipo_cerv_TP122=\"Sub-Zero Lata\"\n}\nelse if (sku_TP122 ==\"60\"){\n    tipo_cerv_TP122=\"Bhoemia Retornável\"\n}\nelse if (sku_TP122==\"61\"){\n    tipo_cerv_TP122=\"Bhoemia Lata\"\n}\nelse if (sku_TP122 ==\"70\"){\n    tipo_cerv_TP122=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP122 ==\"71\"){\n    tipo_cerv_TP122=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP122 ==\"80\"){\n    tipo_cerv_TP122=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP122 ==\"81\"){\n    tipo_cerv_TP122=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP122 ==\"90\"){\n    tipo_cerv_TP122=\"Original Retornável\"\n}\nelse if (sku_TP122 ==\"91\"){\n    tipo_cerv_TP122=\"Original Lata\"\n}\nelse if (sku_TP122 ==\"0\"){\n     tipo_cerv_TP122=\"Vazio\"\n}\n////////////////////////////////////////////////////////////////////////////////\nif (sku_TP124  ==\"1\"){\n    tipo_cerv_TP124 = \"Chopp\"\n}\nelse if (sku_TP124 ==\"10\"){\n     tipo_cerv_TP124=\"Brahma Retornável\"\n}\n\nelse if (sku_TP124 ==\"11\"){\n     tipo_cerv_TP124=\"Brahma Lata\"\n}\n\nelse if (sku_TP124 ==\"20\"){\n     tipo_cerv_TP124=\"SKOL Retornável\"\n}\nelse if (sku_TP124 ==\"21\"){\n     tipo_cerv_TP124=\"SKOL Lata\"\n}\nelse if (sku_TP124 ==\"30\"){\n    tipo_cerv_TP124=\"Antártica Retornável\"\n}\nelse if (sku_TP124 ==\"31\"){\n   tipo_cerv_TP124=\"Antártica Lata\"\n}\nelse if (sku_TP124 ==\"50\"){\n     tipo_cerv_TP124=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP124 ==\"51\"){\n    tipo_cerv_TP124=\"Sub-Zero Lata\"\n}\nelse if (sku_TP124 ==\"60\"){\n    tipo_cerv_TP124=\"Bhoemia Retornável\"\n}\nelse if (sku_TP124==\"61\"){\n    tipo_cerv_TP124=\"Bhoemia Lata\"\n}\nelse if (sku_TP124 ==\"70\"){\n    tipo_cerv_TP124=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP124 ==\"71\"){\n    tipo_cerv_TP124=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP124 ==\"80\"){\n    tipo_cerv_TP124=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP124 ==\"81\"){\n    tipo_cerv_TP124=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP124 ==\"90\"){\n    tipo_cerv_TP124=\"Original Retornável\"\n}\nelse if (sku_TP124 ==\"91\"){\n    tipo_cerv_TP124=\"Original Lata\"\n}\nelse if (sku_TP124 ==\"0\"){\n     tipo_cerv_TP124=\"Vazio\"\n}\n///////////////////////////////////////////////////////////////////////////////\nif (sku_TP123  ==\"1\"){\n    tipo_cerv_TP123 = \"Chopp\"\n}\nelse if (sku_TP123 ==\"10\"){\n     tipo_cerv_TP123=\"Brahma Retornável\"\n}\n\nelse if (sku_TP123 ==\"11\"){\n     tipo_cerv_TP123=\"Brahma Lata\"\n}\n\nelse if (sku_TP123 ==\"20\"){\n     tipo_cerv_TP123=\"SKOL Retornável\"\n}\nelse if (sku_TP123 ==\"21\"){\n     tipo_cerv_TP123=\"SKOL Lata\"\n}\nelse if (sku_TP123 ==\"30\"){\n    tipo_cerv_TP123=\"Antártica Retornável\"\n}\nelse if (sku_TP123 ==\"31\"){\n   tipo_cerv_TP123=\"Antártica Lata\"\n}\nelse if (sku_TP123 ==\"50\"){\n     tipo_cerv_TP123=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP123 ==\"51\"){\n    tipo_cerv_TP123=\"Sub-Zero Lata\"\n}\nelse if (sku_TP123 ==\"60\"){\n    tipo_cerv_TP123=\"Bhoemia Retornável\"\n}\nelse if (sku_TP123==\"61\"){\n    tipo_cerv_TP123=\"Bhoemia Lata\"\n}\nelse if (sku_TP123 ==\"70\"){\n    tipo_cerv_TP123=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP123 ==\"71\"){\n    tipo_cerv_TP123=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP123 ==\"80\"){\n    tipo_cerv_TP123=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP123 ==\"81\"){\n    tipo_cerv_TP123=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP123 ==\"90\"){\n    tipo_cerv_TP123=\"Original Retornável\"\n}\nelse if (sku_TP123 ==\"91\"){\n    tipo_cerv_TP123=\"Original Lata\"\n}\nelse if (sku_TP123 ==\"0\"){\n     tipo_cerv_TP123=\"Vazio\"\n}\n///////////////////////////////////////////////////////////////////////////////\nif (sku_TP125  ==\"1\"){\n    tipo_cerv_TP125 = \"Chopp\"\n}\nelse if (sku_TP125 ==\"10\"){\n     tipo_cerv_TP125=\"Brahma Retornável\"\n}\n\nelse if (sku_TP125 ==\"11\"){\n     tipo_cerv_TP125=\"Brahma Lata\"\n}\n\nelse if (sku_TP125 ==\"20\"){\n     tipo_cerv_TP125=\"SKOL Retornável\"\n}\nelse if (sku_TP125 ==\"21\"){\n     tipo_cerv_TP125=\"SKOL Lata\"\n}\nelse if (sku_TP125 ==\"30\"){\n    tipo_cerv_TP125=\"Antártica Retornável\"\n}\nelse if (sku_TP125 ==\"31\"){\n   tipo_cerv_TP125=\"Antártica Lata\"\n}\nelse if (sku_TP125 ==\"50\"){\n     tipo_cerv_TP125=\"Sub-Zero Retornável\"\n}\nelse if (sku_TP125 ==\"51\"){\n    tipo_cerv_TP125=\"Sub-Zero Lata\"\n}\nelse if (sku_TP125 ==\"60\"){\n    tipo_cerv_TP125=\"Bhoemia Retornável\"\n}\nelse if (sku_TP125==\"61\"){\n    tipo_cerv_TP125=\"Bhoemia Lata\"\n}\nelse if (sku_TP125 ==\"70\"){\n    tipo_cerv_TP125=\"Skol Puro Malte Retornável\"\n}\nelse if (sku_TP125 ==\"71\"){\n    tipo_cerv_TP125=\"Skol Puro Malte Lata\"\n}\nelse if (sku_TP125 ==\"80\"){\n    tipo_cerv_TP125=\"Brahma Duplo Malte Retornável\"\n}\nelse if (sku_TP125 ==\"81\"){\n    tipo_cerv_TP125=\"Brahma Duplo Malte Lata\"\n}\nelse if (sku_TP125 ==\"90\"){\n    tipo_cerv_TP125=\"Original Retornável\"\n}\nelse if (sku_TP125 ==\"91\"){\n    tipo_cerv_TP125=\"Original Lata\"\n}\nelse if (sku_TP125 ==\"0\"){\n     tipo_cerv_TP125=\"Vazio\"\n}\n//##############################################################################\nquery = (\"\\n TP111:\" + volume_TP111 +\"hL, \" + temperatura_TP111 +\"°C, \" + pressao_TP111 + \" BAR \"+ \"e o SKU é: \" + tipo_cerv_TP111 +\".\\n\" \n+\"TP112:\" + volume_TP112 +\"hL, \" + temperatura_TP112 +\"°C \"  + pressao_TP112 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP112 +\".\\n\"\n+\"TP113:\" + volume_TP113 +\"hL, \" + temperatura_TP113 +\"°C, \" + pressao_TP113 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP113 +\".\\n\"\n+\"TP114:\" + volume_TP114 +\"hL, \" + temperatura_TP114 +\"°C, \" + pressao_TP114 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP114 +\".\\n\"\n+\"TP115:\" + volume_TP115 +\"hL, \" + temperatura_TP115 +\"°C, \" + pressao_TP115 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP115 +\".\\n\"\n+\"TP121:\" + volume_TP121 +\"hL, \" + temperatura_TP121 +\"°C, \" + pressao_TP121 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP121 +\".\\n\"\n+\"TP122:\" + volume_TP122 +\"hL, \" + temperatura_TP122 +\"°C, \" + pressao_TP122 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP122 +\".\\n\"\n+\"TP123:\" + volume_TP123 +\"hL, \" + temperatura_TP123 +\"°C, \" + pressao_TP123 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP123 +\".\\n\"\n+\"TP124:\" + volume_TP124 +\"hL, \" + temperatura_TP124 +\"°C, \" + pressao_TP124 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP124 +\".\\n\"\n+\"TP125:\" + volume_TP125 +\"hL, \" + temperatura_TP125 +\"°C, \" + pressao_TP125 + \" BAR \"+\" e o SKU é: \" + tipo_cerv_TP125 +\".\\n\"\n+\"\\nO volume total é de: \" + volume_tot.toFixed(2) +\"hL.\\n\");\n\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":660,"y":2020,"wires":[["6f61bacf.a26b04"]]},{"id":"6f61bacf.a26b04","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":915,"y":2180,"wires":[]},{"id":"95d63be6.599058","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"vol_enviado_pack","query":"SELECT top(\"VAZAO_TOT_L501\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(200ms) fill(null);SELECT top(\"VAZAO_TOT_L502\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(200ms) fill(null);SELECT top(\"VAZAO_TOT_L511\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(200ms) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":430,"y":2340,"wires":[["949ac9f1.cfd9d8"]]},{"id":"949ac9f1.cfd9d8","type":"function","z":"6267b9e6.8530b8","name":"vol_enviado_pack","func":"var volume_501= msg.payload[0][0].top\nvar volume_502= msg.payload[1][0].top\nvar volume_511= msg.payload[2][0].top\nvar volume_512= \"Em breve\"\nvar volume_521= \"Em breve\"\n///############################################################\nquery = (\"\\n Volume enviado L501:\" + volume_501 +\"Hl/h.\\n\" +\"Volume enviado L502:\" + volume_502 +\"Hl/h.\\n\"+\"Volume enviado L511:\" + volume_511 +\"Hl/h.\\n\"+\"Volume enviado L512:\" + volume_512 +\".\\n\"+\"Volume enviado L521:\" + volume_521 +\".\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":670,"y":2340,"wires":[["6f61bacf.a26b04"]]},{"id":"cccfe2c1.d96b4","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"ultima_horaria_L501","query":"SELECT non_negative_difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 1h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":420,"y":640,"wires":[["89a4d1ee.c9419"]]},{"id":"89a4d1ee.c9419","type":"function","z":"6267b9e6.8530b8","name":"ultima_horaria_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '501'\nvar query  = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[0].non_negative_difference;\n\n\n\nquery = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno A 501\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":640,"wires":[["fca3a75c.2f4b68"]]},{"id":"f1504f0f.0f759","type":"function","z":"6267b9e6.8530b8","name":"ultima_horaria_L511","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '511'\nvar query  = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[0].non_negative_difference;\n\n\n\nquery = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" latas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"horaria_511\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":1160,"wires":[["d00f10c0.60022"]]},{"id":"354e5291.4a6e8e","type":"function","z":"6267b9e6.8530b8","name":"ultima_horaria_L502","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '501'\nvar query  = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[0].difference;\n\n\n\nquery = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"horaria 502\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":700,"y":900,"wires":[["91241974.5df308"]]},{"id":"c9b21313.97e09","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"ultima_horaria_L511","query":"SELECT non_negative_difference(max(\"F8[61]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 1h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":420,"y":1160,"wires":[["f1504f0f.0f759"]]},{"id":"9aa8fe37.a148","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"ultima_horaria_502","query":"SELECT difference(max(\"F8[31]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 1h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":410,"y":900,"wires":[["354e5291.4a6e8e"]]},{"id":"5742f756.b36ec8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"ultima_horaria_512","query":"SELECT non_negative_difference(max(\"Total Produtos(Bruto)\")) FROM \"L512_ENCHEDORA\" WHERE time >= now() - 1h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":390,"y":1400,"wires":[["45eff9fa.513e38"]]},{"id":"45eff9fa.513e38","type":"function","z":"6267b9e6.8530b8","name":"ultima_horaria_L512","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '512'\nvar query  = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[0].non_negative_difference;\n\n\n\nquery = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" latas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"horaria_512\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":600,"y":1400,"wires":[["3e3dd76.aa83128"]]},{"id":"a21889e0.f5a8f8","type":"debug","z":"6267b9e6.8530b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2300,"y":2180,"wires":[]},{"id":"c4ce3738.5128c8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"status_ods","query":"SELECT top(\"PASSO_OD01\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD02\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD03\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD04\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD05\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD06\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD07\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD08\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD09\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD10\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD11\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD12\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD13\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD14\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD15\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD16\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD17\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD18\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD19\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD20\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD21\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD22\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD23\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD24\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD25\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD26\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD27\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD28\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);  SELECT top(\"PASSO_OD29\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD30\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD31\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD32\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD33\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD34\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD35\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null); SELECT top(\"PASSO_OD36\", 1) FROM \"ADG_ST\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":2070,"y":2040,"wires":[["acf42f69.d831"]]},{"id":"acf42f69.d831","type":"function","z":"6267b9e6.8530b8","name":"status_ods","func":"var\tstatus_od111=msg.payload[0][0].top\nvar\tstatus_od112=msg.payload[1][0].top\nvar\tstatus_od113=msg.payload[2][0].top\nvar\tstatus_od114=msg.payload[3][0].top\nvar\tstatus_od115=msg.payload[4][0].top\nvar\tstatus_od116=msg.payload[5][0].top\nvar\tstatus_od117=msg.payload[6][0].top\nvar\tstatus_od118=msg.payload[7][0].top\nvar\tstatus_od119=msg.payload[8][0].top\nvar\tstatus_od121=msg.payload[9][0].top\nvar\tstatus_od122=msg.payload[10][0].top\nvar\tstatus_od123=msg.payload[11][0].top\nvar\tstatus_od124=msg.payload[12][0].top\nvar\tstatus_od125=msg.payload[13][0].top\nvar\tstatus_od126=msg.payload[14][0].top\nvar\tstatus_od127=msg.payload[15][0].top\nvar\tstatus_od128=msg.payload[16][0].top\nvar\tstatus_od129=msg.payload[17][0].top\nvar\tstatus_od131=msg.payload[18][0].top\nvar\tstatus_od132=msg.payload[19][0].top\nvar\tstatus_od133=msg.payload[20][0].top\nvar\tstatus_od134=msg.payload[21][0].top\nvar\tstatus_od135=msg.payload[22][0].top\nvar\tstatus_od136=msg.payload[23][0].top\nvar\tstatus_od137=msg.payload[24][0].top\nvar\tstatus_od138=msg.payload[25][0].top\nvar\tstatus_od139=msg.payload[26][0].top\nvar\tstatus_od141=msg.payload[27][0].top\nvar\tstatus_od142=msg.payload[28][0].top\nvar\tstatus_od143=msg.payload[29][0].top\nvar\tstatus_od144=msg.payload[30][0].top\nvar\tstatus_od145=msg.payload[31][0].top\nvar\tstatus_od146=msg.payload[32][0].top\nvar\tstatus_od147=msg.payload[33][0].top\nvar\tstatus_od148=msg.payload[34][0].top\nvar\tstatus_od149=msg.payload[35][0].top\n\n\n//#############################################################\n\nif (status_od111 == \"1\"){\n    passo_od111 =\"Etapa Inicial\"\n}\nelse if (status_od111==\"2\"){\n    passo_od111=\"Enchimento\"\n}\nelse if (status_od111==\"4\"){\n    passo_od111=\"Fermentação\"\n}\n\nelse if (status_od111==\"8\"){\n    passo_od111=\"Resfriamento\"\n}\nelse if (status_od111==\"64\"){\n    passo_od111=\"Maturação\"\n}\nelse if (status_od111==\"128\"){\n    passo_od111=\"Final Controle\"\n}\nelse if (status_od111==\"256\"){\n    passo_od111=\"Propagação\"\n}\nelse if (status_od111==\"0\"){\n     passo_od111=\"Vazio\"\n}\n//#############################################################\n\nif (status_od112 == \"1\"){\n    passo_od112 =\"Etapa Inicial\"\n}\nelse if (status_od112==\"2\"){\n    passo_od112=\"Enchimento\"\n}\nelse if (status_od112==\"4\"){\n    passo_od112=\"Fermentação\"\n}\n\nelse if (status_od112==\"8\"){\n    passo_od112=\"Resfriamento\"\n}\nelse if (status_od112==\"64\"){\n    passo_od112=\"Maturação\"\n}\nelse if (status_od112==\"128\"){\n    passo_od112=\"Final Controle\"\n}\nelse if (status_od112==\"256\"){\n    passo_od112=\"Propagação\"\n}\nelse if (status_od112==\"0\"){\n     passo_od112=\"Vazio\"\n}\n///############################################################\nif (status_od113 == \"1\"){\n    passo_od113 =\"Etapa Inicial\"\n}\nelse if (status_od113==\"2\"){\n    passo_od113=\"Enchimento\"\n}\nelse if (status_od113==\"4\"){\n    passo_od113=\"Fermentação\"\n}\n\nelse if (status_od113==\"8\"){\n    passo_od113=\"Resfriamento\"\n}\nelse if (status_od113==\"64\"){\n    passo_od113=\"Maturação\"\n}\nelse if (status_od113==\"128\"){\n    passo_od113=\"Final Controle\"\n}\nelse if (status_od113==\"256\"){\n    passo_od113=\"Propagação\"\n}\nelse if (status_od113==\"0\"){\n     passo_od113=\"Vazio\"\n}\n//#############################################################################\nif (status_od114 == \"1\"){\n    passo_od114 =\"Etapa Inicial\"\n}\nelse if (status_od114==\"2\"){\n    passo_od114=\"Enchimento\"\n}\nelse if (status_od114==\"4\"){\n    passo_od114=\"Fermentação\"\n}\n\nelse if (status_od114==\"8\"){\n    passo_od114=\"Resfriamento\"\n}\nelse if (status_od114==\"64\"){\n    passo_od114=\"Maturação\"\n}\nelse if (status_od114==\"128\"){\n    passo_od114=\"Final Controle\"\n}\nelse if (status_od114==\"256\"){\n    passo_od114=\"Propagação\"\n}\nelse if (status_od114==\"0\"){\n     passo_od114=\"Vazio\"\n}\n//#############################################################################\nif (status_od115 == \"1\"){\n    passo_od115 =\"Etapa Inicial\"\n}\nelse if (status_od115==\"2\"){\n    passo_od115=\"Enchimento\"\n}\nelse if (status_od115==\"4\"){\n    passo_od115=\"Fermentação\"\n}\n\nelse if (status_od115==\"8\"){\n    passo_od115=\"Resfriamento\"\n}\nelse if (status_od115==\"64\"){\n    passo_od115=\"Maturação\"\n}\nelse if (status_od115==\"128\"){\n    passo_od115=\"Final Controle\"\n}\nelse if (status_od115==\"256\"){\n    passo_od115=\"Propagação\"\n}\nelse if (status_od115==\"0\"){\n     passo_od115=\"Vazio\"\n}\n//#############################################################################\nif (status_od116 == \"1\"){\n    passo_od116 =\"Etapa Inicial\"\n}\nelse if (status_od116==\"2\"){\n    passo_od116=\"Enchimento\"\n}\nelse if (status_od116==\"4\"){\n    passo_od116=\"Fermentação\"\n}\n\nelse if (status_od116==\"8\"){\n    passo_od116=\"Resfriamento\"\n}\nelse if (status_od116==\"64\"){\n    passo_od116=\"Maturação\"\n}\nelse if (status_od116==\"128\"){\n    passo_od116=\"Final Controle\"\n}\nelse if (status_od116==\"256\"){\n    passo_od116=\"Propagação\"\n}\nelse if (status_od116==\"0\"){\n     passo_od116=\"Vazio\"\n}\n//#############################################################################\nif (status_od117 == \"1\"){\n    passo_od117 =\"Etapa Inicial\"\n}\nelse if (status_od117==\"2\"){\n    passo_od117=\"Enchimento\"\n}\nelse if (status_od117==\"4\"){\n    passo_od117=\"Fermentação\"\n}\n\nelse if (status_od117==\"8\"){\n    passo_od117=\"Resfriamento\"\n}\nelse if (status_od117==\"64\"){\n    passo_od117=\"Maturação\"\n}\nelse if (status_od117==\"128\"){\n    passo_od117=\"Final Controle\"\n}\nelse if (status_od117==\"256\"){\n    passo_od117=\"Propagação\"\n}\nelse if (status_od117==\"0\"){\n     passo_od117=\"Vazio\"\n}\n//#############################################################################\nif (status_od118 == \"1\"){\n    passo_od118 =\"Etapa Inicial\"\n}\nelse if (status_od118==\"2\"){\n    passo_od118=\"Enchimento\"\n}\nelse if (status_od118==\"4\"){\n    passo_od118=\"Fermentação\"\n}\n\nelse if (status_od118==\"8\"){\n    passo_od118=\"Resfriamento\"\n}\nelse if (status_od118==\"64\"){\n    passo_od118=\"Maturação\"\n}\nelse if (status_od118==\"128\"){\n    passo_od118=\"Final Controle\"\n}\nelse if (status_od118==\"256\"){\n    passo_od118=\"Propagação\"\n}\nelse if (status_od118==\"0\"){\n     passo_od118=\"Vazio\"\n}\n//#############################################################################\nif (status_od119 == \"1\"){\n    passo_od119 =\"Etapa Inicial\"\n}\nelse if (status_od119==\"2\"){\n    passo_od119=\"Enchimento\"\n}\nelse if (status_od119==\"4\"){\n    passo_od119=\"Fermentação\"\n}\n\nelse if (status_od119==\"8\"){\n    passo_od119=\"Resfriamento\"\n}\nelse if (status_od119==\"64\"){\n    passo_od119=\"Maturação\"\n}\nelse if (status_od119==\"128\"){\n    passo_od119=\"Final Controle\"\n}\nelse if (status_od119==\"256\"){\n    passo_od119=\"Propagação\"\n}\nelse if (status_od119==\"0\"){\n     passo_od119=\"Vazio\"\n}\n//#############################################################################\nif (status_od121 == \"1\"){\n    passo_od121 =\"Etapa Inicial\"\n}\nelse if (status_od121==\"2\"){\n    passo_od121=\"Enchimento\"\n}\nelse if (status_od121==\"4\"){\n    passo_od121=\"Fermentação\"\n}\n\nelse if (status_od121==\"8\"){\n    passo_od121=\"Resfriamento\"\n}\nelse if (status_od121==\"64\"){\n    passo_od121=\"Maturação\"\n}\nelse if (status_od121==\"128\"){\n    passo_od121=\"Final Controle\"\n}\nelse if (status_od121==\"256\"){\n    passo_od121=\"Propagação\"\n}\nelse if (status_od121==\"0\"){\n     passo_od121=\"Vazio\"\n}\n//#############################################################################\nif (status_od122 == \"1\"){\n    passo_od122 =\"Etapa Inicial\"\n}\nelse if (status_od122==\"2\"){\n    passo_od122=\"Enchimento\"\n}\nelse if (status_od122==\"4\"){\n    passo_od122=\"Fermentação\"\n}\n\nelse if (status_od122==\"8\"){\n    passo_od122=\"Resfriamento\"\n}\nelse if (status_od122==\"64\"){\n    passo_od122=\"Maturação\"\n}\nelse if (status_od122==\"128\"){\n    passo_od122=\"Final Controle\"\n}\nelse if (status_od122==\"256\"){\n    passo_od122=\"Propagação\"\n}\nelse if (status_od122==\"0\"){\n     passo_od122=\"Vazio\"\n}\n//#############################################################################\nif (status_od123 == \"1\"){\n    passo_od123 =\"Etapa Inicial\"\n}\nelse if (status_od123==\"2\"){\n    passo_od123=\"Enchimento\"\n}\nelse if (status_od123==\"4\"){\n    passo_od123=\"Fermentação\"\n}\n\nelse if (status_od123==\"8\"){\n    passo_od123=\"Resfriamento\"\n}\nelse if (status_od123==\"64\"){\n    passo_od123=\"Maturação\"\n}\nelse if (status_od123==\"128\"){\n    passo_od123=\"Final Controle\"\n}\nelse if (status_od123==\"256\"){\n    passo_od123=\"Propagação\"\n}\nelse if (status_od123==\"0\"){\n     passo_od123=\"Vazio\"\n}\n//#############################################################################\nif (status_od124 == \"1\"){\n    passo_od124 =\"Etapa Inicial\"\n}\nelse if (status_od124==\"2\"){\n    passo_od124=\"Enchimento\"\n}\nelse if (status_od124==\"4\"){\n    passo_od124=\"Fermentação\"\n}\n\nelse if (status_od124==\"8\"){\n    passo_od124=\"Resfriamento\"\n}\nelse if (status_od124==\"64\"){\n    passo_od124=\"Maturação\"\n}\nelse if (status_od124==\"128\"){\n    passo_od124=\"Final Controle\"\n}\nelse if (status_od124==\"256\"){\n    passo_od124=\"Propagação\"\n}\nelse if (status_od124==\"0\"){\n     passo_od124=\"Vazio\"\n}\n//#############################################################################\nif (status_od125 == \"1\"){\n    passo_od125 =\"Etapa Inicial\"\n}\nelse if (status_od125==\"2\"){\n    passo_od125=\"Enchimento\"\n}\nelse if (status_od125==\"4\"){\n    passo_od125=\"Fermentação\"\n}\n\nelse if (status_od125==\"8\"){\n    passo_od125=\"Resfriamento\"\n}\nelse if (status_od125==\"64\"){\n    passo_od125=\"Maturação\"\n}\nelse if (status_od125==\"128\"){\n    passo_od125=\"Final Controle\"\n}\nelse if (status_od125==\"256\"){\n    passo_od125=\"Propagação\"\n}\nelse if (status_od125==\"0\"){\n     passo_od125=\"Vazio\"\n}\n//#############################################################################\nif (status_od126 == \"1\"){\n    passo_od126 =\"Etapa Inicial\"\n}\nelse if (status_od126==\"2\"){\n    passo_od126=\"Enchimento\"\n}\nelse if (status_od126==\"4\"){\n    passo_od126=\"Fermentação\"\n}\n\nelse if (status_od126==\"8\"){\n    passo_od126=\"Resfriamento\"\n}\nelse if (status_od126==\"64\"){\n    passo_od126=\"Maturação\"\n}\nelse if (status_od126==\"128\"){\n    passo_od126=\"Final Controle\"\n}\nelse if (status_od126==\"256\"){\n    passo_od126=\"Propagação\"\n}\nelse if (status_od126==\"0\"){\n     passo_od126=\"Vazio\"\n}\n//#############################################################################\nif (status_od127 == \"1\"){\n    passo_od127 =\"Etapa Inicial\"\n}\nelse if (status_od127==\"2\"){\n    passo_od127=\"Enchimento\"\n}\nelse if (status_od127==\"4\"){\n    passo_od127=\"Fermentação\"\n}\n\nelse if (status_od127==\"8\"){\n    passo_od127=\"Resfriamento\"\n}\nelse if (status_od127==\"64\"){\n    passo_od127=\"Maturação\"\n}\nelse if (status_od127==\"128\"){\n    passo_od127=\"Final Controle\"\n}\nelse if (status_od127==\"256\"){\n    passo_od127=\"Propagação\"\n}\nelse if (status_od127==\"0\"){\n     passo_od127=\"Vazio\"\n}\n//#############################################################################\nif (status_od128 == \"1\"){\n    passo_od128 =\"Etapa Inicial\"\n}\nelse if (status_od128==\"2\"){\n    passo_od128=\"Enchimento\"\n}\nelse if (status_od128==\"4\"){\n    passo_od128=\"Fermentação\"\n}\n\nelse if (status_od128==\"8\"){\n    passo_od128=\"Resfriamento\"\n}\nelse if (status_od128==\"64\"){\n    passo_od128=\"Maturação\"\n}\nelse if (status_od128==\"128\"){\n    passo_od128=\"Final Controle\"\n}\nelse if (status_od128==\"256\"){\n    passo_od128=\"Propagação\"\n}\nelse if (status_od128==\"0\"){\n     passo_od128=\"Vazio\"\n}\n//#############################################################################\nif (status_od129 == \"1\"){\n    passo_od129 =\"Etapa Inicial\"\n}\nelse if (status_od129==\"2\"){\n    passo_od129=\"Enchimento\"\n}\nelse if (status_od129==\"4\"){\n    passo_od129=\"Fermentação\"\n}\n\nelse if (status_od129==\"8\"){\n    passo_od129=\"Resfriamento\"\n}\nelse if (status_od129==\"64\"){\n    passo_od129=\"Maturação\"\n}\nelse if (status_od129==\"128\"){\n    passo_od129=\"Final Controle\"\n}\nelse if (status_od129==\"256\"){\n    passo_od129=\"Propagação\"\n}\nelse if (status_od129==\"0\"){\n     passo_od129=\"Vazio\"\n}\n//#############################################################################\nif (status_od131 == \"1\"){\n    passo_od131 =\"Etapa Inicial\"\n}\nelse if (status_od131==\"2\"){\n    passo_od131=\"Enchimento\"\n}\nelse if (status_od131==\"4\"){\n    passo_od131=\"Fermentação\"\n}\n\nelse if (status_od131==\"8\"){\n    passo_od131=\"Resfriamento\"\n}\nelse if (status_od131==\"64\"){\n    passo_od131=\"Maturação\"\n}\nelse if (status_od131==\"128\"){\n    passo_od131=\"Final Controle\"\n}\nelse if (status_od131==\"256\"){\n    passo_od131=\"Propagação\"\n}\nelse if (status_od131==\"0\"){\n     passo_od131=\"Vazio\"\n}\n//#############################################################################\nif (status_od132 == \"1\"){\n    passo_od132 =\"Etapa Inicial\"\n}\nelse if (status_od132==\"2\"){\n    passo_od132=\"Enchimento\"\n}\nelse if (status_od132==\"4\"){\n    passo_od132=\"Fermentação\"\n}\n\nelse if (status_od132==\"8\"){\n    passo_od132=\"Resfriamento\"\n}\nelse if (status_od132==\"64\"){\n    passo_od132=\"Maturação\"\n}\nelse if (status_od132==\"128\"){\n    passo_od132=\"Final Controle\"\n}\nelse if (status_od132==\"256\"){\n    passo_od132=\"Propagação\"\n}\nelse if (status_od132==\"0\"){\n     passo_od132=\"Vazio\"\n}\n//#############################################################################\nif (status_od133 == \"1\"){\n    passo_od133 =\"Etapa Inicial\"\n}\nelse if (status_od133==\"2\"){\n    passo_od133=\"Enchimento\"\n}\nelse if (status_od133==\"4\"){\n    passo_od133=\"Fermentação\"\n}\n\nelse if (status_od133==\"8\"){\n    passo_od133=\"Resfriamento\"\n}\nelse if (status_od133==\"64\"){\n    passo_od133=\"Maturação\"\n}\nelse if (status_od133==\"128\"){\n    passo_od133=\"Final Controle\"\n}\nelse if (status_od133==\"256\"){\n    passo_od133=\"Propagação\"\n}\nelse if (status_od133==\"0\"){\n     passo_od133=\"Vazio\"\n}\n//#############################################################################\nif (status_od134 == \"1\"){\n    passo_od134 =\"Etapa Inicial\"\n}\nelse if (status_od134==\"2\"){\n    passo_od134=\"Enchimento\"\n}\nelse if (status_od134==\"4\"){\n    passo_od134=\"Fermentação\"\n}\n\nelse if (status_od134==\"8\"){\n    passo_od134=\"Resfriamento\"\n}\nelse if (status_od134==\"64\"){\n    passo_od134=\"Maturação\"\n}\nelse if (status_od134==\"128\"){\n    passo_od134=\"Final Controle\"\n}\nelse if (status_od134==\"256\"){\n    passo_od134=\"Propagação\"\n}\nelse if (status_od134==\"0\"){\n     passo_od134=\"Vazio\"\n}\n//#############################################################################\nif (status_od135 == \"1\"){\n    passo_od135 =\"Etapa Inicial\"\n}\nelse if (status_od135==\"2\"){\n    passo_od135=\"Enchimento\"\n}\nelse if (status_od135==\"4\"){\n    passo_od135=\"Fermentação\"\n}\n\nelse if (status_od135==\"8\"){\n    passo_od135=\"Resfriamento\"\n}\nelse if (status_od135==\"64\"){\n    passo_od135=\"Maturação\"\n}\nelse if (status_od135==\"128\"){\n    passo_od135=\"Final Controle\"\n}\nelse if (status_od135==\"256\"){\n    passo_od135=\"Propagação\"\n}\nelse if (status_od135==\"0\"){\n     passo_od135=\"Vazio\"\n}\n//#############################################################################\nif (status_od136 == \"1\"){\n    passo_od136 =\"Etapa Inicial\"\n}\nelse if (status_od136==\"2\"){\n    passo_od136=\"Enchimento\"\n}\nelse if (status_od136==\"4\"){\n    passo_od136=\"Fermentação\"\n}\n\nelse if (status_od136==\"8\"){\n    passo_od136=\"Resfriamento\"\n}\nelse if (status_od136==\"64\"){\n    passo_od136=\"Maturação\"\n}\nelse if (status_od136==\"128\"){\n    passo_od136=\"Final Controle\"\n}\nelse if (status_od136==\"256\"){\n    passo_od136=\"Propagação\"\n}\nelse if (status_od136==\"0\"){\n     passo_od136=\"Vazio\"\n}\n//#############################################################################\nif (status_od137 == \"1\"){\n    passo_od137 =\"Etapa Inicial\"\n}\nelse if (status_od137==\"2\"){\n    passo_od137=\"Enchimento\"\n}\nelse if (status_od137==\"4\"){\n    passo_od137=\"Fermentação\"\n}\n\nelse if (status_od137==\"8\"){\n    passo_od137=\"Resfriamento\"\n}\nelse if (status_od137==\"64\"){\n    passo_od137=\"Maturação\"\n}\nelse if (status_od137==\"128\"){\n    passo_od137=\"Final Controle\"\n}\nelse if (status_od137==\"256\"){\n    passo_od137=\"Propagação\"\n}\nelse if (status_od137==\"0\"){\n     passo_od137=\"Vazio\"\n}\n//#############################################################################\nif (status_od138 == \"1\"){\n    passo_od138 =\"Etapa Inicial\"\n}\nelse if (status_od138==\"2\"){\n    passo_od138=\"Enchimento\"\n}\nelse if (status_od138==\"4\"){\n    passo_od138=\"Fermentação\"\n}\n\nelse if (status_od138==\"8\"){\n    passo_od138=\"Resfriamento\"\n}\nelse if (status_od138==\"64\"){\n    passo_od138=\"Maturação\"\n}\nelse if (status_od138==\"128\"){\n    passo_od138=\"Final Controle\"\n}\nelse if (status_od138==\"256\"){\n    passo_od138=\"Propagação\"\n}\nelse if (status_od138==\"0\"){\n     passo_od138=\"Vazio\"\n}\n//#############################################################################\nif (status_od139 == \"1\"){\n    passo_od139 =\"Etapa Inicial\"\n}\nelse if (status_od139==\"2\"){\n    passo_od139=\"Enchimento\"\n}\nelse if (status_od139==\"4\"){\n    passo_od139=\"Fermentação\"\n}\n\nelse if (status_od139==\"8\"){\n    passo_od139=\"Resfriamento\"\n}\nelse if (status_od139==\"64\"){\n    passo_od139=\"Maturação\"\n}\nelse if (status_od139==\"128\"){\n    passo_od139=\"Final Controle\"\n}\nelse if (status_od139==\"256\"){\n    passo_od139=\"Propagação\"\n}\nelse if (status_od139==\"0\"){\n     passo_od139=\"Vazio\"\n}\n//#############################################################################\nif (status_od141 == \"1\"){\n    passo_od141 =\"Etapa Inicial\"\n}\nelse if (status_od141==\"2\"){\n    passo_od141=\"Enchimento\"\n}\nelse if (status_od141==\"4\"){\n    passo_od141=\"Fermentação\"\n}\n\nelse if (status_od141==\"8\"){\n    passo_od141=\"Resfriamento\"\n}\nelse if (status_od141==\"64\"){\n    passo_od141=\"Maturação\"\n}\nelse if (status_od141==\"128\"){\n    passo_od141=\"Final Controle\"\n}\nelse if (status_od141==\"256\"){\n    passo_od141=\"Propagação\"\n}\nelse if (status_od141==\"0\"){\n     passo_od141=\"Vazio\"\n}\n//#############################################################################\nif (status_od142 == \"1\"){\n    passo_od142 =\"Etapa Inicial\"\n}\nelse if (status_od142==\"2\"){\n    passo_od142=\"Enchimento\"\n}\nelse if (status_od142==\"4\"){\n    passo_od142=\"Fermentação\"\n}\n\nelse if (status_od142==\"8\"){\n    passo_od142=\"Resfriamento\"\n}\nelse if (status_od142==\"64\"){\n    passo_od142=\"Maturação\"\n}\nelse if (status_od142==\"128\"){\n    passo_od142=\"Final Controle\"\n}\nelse if (status_od142==\"256\"){\n    passo_od142=\"Propagação\"\n}\nelse if (status_od142==\"0\"){\n     passo_od142=\"Vazio\"\n}\n//#############################################################################\nif (status_od143 == \"1\"){\n    passo_od143 =\"Etapa Inicial\"\n}\nelse if (status_od143==\"2\"){\n    passo_od143=\"Enchimento\"\n}\nelse if (status_od143==\"4\"){\n    passo_od143=\"Fermentação\"\n}\n\nelse if (status_od143==\"8\"){\n    passo_od143=\"Resfriamento\"\n}\nelse if (status_od143==\"64\"){\n    passo_od143=\"Maturação\"\n}\nelse if (status_od143==\"128\"){\n    passo_od143=\"Final Controle\"\n}\nelse if (status_od143==\"256\"){\n    passo_od143=\"Propagação\"\n}\nelse if (status_od143==\"0\"){\n     passo_od143=\"Vazio\"\n}\n//#############################################################################\nif (status_od144 == \"1\"){\n    passo_od144 =\"Etapa Inicial\"\n}\nelse if (status_od144==\"2\"){\n    passo_od144=\"Enchimento\"\n}\nelse if (status_od144==\"4\"){\n    passo_od144=\"Fermentação\"\n}\n\nelse if (status_od144==\"8\"){\n    passo_od144=\"Resfriamento\"\n}\nelse if (status_od144==\"64\"){\n    passo_od144=\"Maturação\"\n}\nelse if (status_od144==\"128\"){\n    passo_od144=\"Final Controle\"\n}\nelse if (status_od144==\"256\"){\n    passo_od144=\"Propagação\"\n}\nelse if (status_od144==\"0\"){\n     passo_od144=\"Vazio\"\n}\n//#############################################################################\nif (status_od145 == \"1\"){\n    passo_od145 =\"Etapa Inicial\"\n}\nelse if (status_od145==\"2\"){\n    passo_od145=\"Enchimento\"\n}\nelse if (status_od145==\"4\"){\n    passo_od145=\"Fermentação\"\n}\n\nelse if (status_od145==\"8\"){\n    passo_od145=\"Resfriamento\"\n}\nelse if (status_od145==\"64\"){\n    passo_od145=\"Maturação\"\n}\nelse if (status_od145==\"128\"){\n    passo_od145=\"Final Controle\"\n}\nelse if (status_od145==\"256\"){\n    passo_od145=\"Propagação\"\n}\nelse if (status_od145==\"0\"){\n     passo_od145=\"Vazio\"\n}\n//#############################################################################\nif (status_od146 == \"1\"){\n    passo_od146 =\"Etapa Inicial\"\n}\nelse if (status_od146==\"2\"){\n    passo_od146=\"Enchimento\"\n}\nelse if (status_od146==\"4\"){\n    passo_od146=\"Fermentação\"\n}\n\nelse if (status_od146==\"8\"){\n    passo_od146=\"Resfriamento\"\n}\nelse if (status_od146==\"64\"){\n    passo_od146=\"Maturação\"\n}\nelse if (status_od146==\"128\"){\n    passo_od146=\"Final Controle\"\n}\nelse if (status_od146==\"256\"){\n    passo_od146=\"Propagação\"\n}\nelse if (status_od146==\"0\"){\n     passo_od146=\"Vazio\"\n}\n//#############################################################################\nif (status_od147 == \"1\"){\n    passo_od147 =\"Etapa Inicial\"\n}\nelse if (status_od147==\"2\"){\n    passo_od147=\"Enchimento\"\n}\nelse if (status_od147==\"4\"){\n    passo_od147=\"Fermentação\"\n}\n\nelse if (status_od147==\"8\"){\n    passo_od147=\"Resfriamento\"\n}\nelse if (status_od147==\"64\"){\n    passo_od147=\"Maturação\"\n}\nelse if (status_od147==\"128\"){\n    passo_od147=\"Final Controle\"\n}\nelse if (status_od147==\"256\"){\n    passo_od147=\"Propagação\"\n}\nelse if (status_od147==\"0\"){\n     passo_od147=\"Vazio\"\n}\n//#############################################################################\nif (status_od148 == \"1\"){\n    passo_od148 =\"Etapa Inicial\"\n}\nelse if (status_od148==\"2\"){\n    passo_od148=\"Enchimento\"\n}\nelse if (status_od148==\"4\"){\n    passo_od148=\"Fermentação\"\n}\n\nelse if (status_od148==\"8\"){\n    passo_od148=\"Resfriamento\"\n}\nelse if (status_od148==\"64\"){\n    passo_od148=\"Maturação\"\n}\nelse if (status_od148==\"128\"){\n    passo_od148=\"Final Controle\"\n}\nelse if (status_od148==\"256\"){\n    passo_od148=\"Propagação\"\n}\nelse if (status_od148==\"0\"){\n     passo_od148=\"Vazio\"\n}\n//#############################################################################\nif (status_od149 == \"1\"){\n    passo_od149 =\"Etapa Inicial\"\n}\nelse if (status_od149==\"2\"){\n    passo_od149=\"Enchimento\"\n}\nelse if (status_od149==\"4\"){\n    passo_od149=\"Fermentação\"\n}\n\nelse if (status_od149==\"8\"){\n    passo_od149=\"Resfriamento\"\n}\nelse if (status_od149==\"64\"){\n    passo_od149=\"Maturação\"\n}\nelse if (status_od149==\"128\"){\n    passo_od149=\"Final Controle\"\n}\nelse if (status_od149==\"256\"){\n    passo_od149=\"Propagação\"\n}\nelse if (status_od149==\"0\"){\n     passo_od149=\"Vazio\"\n}\n\nquery = (\"\\n OD111: \" + passo_od111 +\"-- OD112: \" + passo_od112 +\"\\n\"\n+\"OD113: \" + passo_od113 +\"--OD114: \" + passo_od114 +\"\\n\"\n+\"OD115: \" + passo_od115 +\"--OD116: \" + passo_od116 +\"\\n\"\n+\"OD117: \" + passo_od117 +\"--OD118: \" + passo_od118 +\"\\n\"\n+\"OD119: \" + passo_od119 +\"--OD121: \" + passo_od121 +\"\\n\"\n+\"OD122: \" + passo_od122 +\"--OD123: \" + passo_od123 +\"\\n\"\n+\"OD124: \" + passo_od124 +\"--OD125: \" + passo_od125 +\"\\n\"\n+\"OD126: \" + passo_od126 +\"--OD127: \" + passo_od127 +\"\\n\"\n+\"OD128: \" + passo_od128 +\"--OD129: \" + passo_od129 +\"\\n\"\n+\"OD131: \" + passo_od131 +\"--OD132: \" + passo_od132 +\"\\n\"\n+\"OD133: \" + passo_od133 +\"--OD134: \" + passo_od134 +\"\\n\"\n+\"OD135: \" + passo_od135 +\"--OD136: \" + passo_od136 +\"\\n\"\n+\"OD137: \" + passo_od137 +\"--OD138: \" + passo_od138 +\"\\n\"\n+\"OD139: \" + passo_od139 +\"--OD141: \" + passo_od141 +\"\\n\"\n+\"OD142: \" + passo_od142 +\"--OD143: \" + passo_od143 +\"\\n\"\n+\"OD144: \" + passo_od144 +\"--OD145: \" + passo_od145 +\"\\n\"\n+\"OD146: \" + passo_od146 +\"--OD147: \" + passo_od147 +\"\\n\"\n+\"OD148: \" + passo_od148 +\"--OD149: \" + passo_od149 +\"\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2250,"y":2040,"wires":[["e28ac576.fe51a8"]]},{"id":"e51d0679.040b78","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"Vapor","query":"SELECT last(\"CONDENSED_RETURN_CALD2_HOUR\") FROM \"Heat\" WHERE time >= now() - 1m GROUP BY time(60s) fill(null);SELECT last(\"PRESSAO_DISTRIBUICAO_VAPOR_CALDEIRA_2\")  / 1 FROM \"CL_CALDEIRAS\" WHERE time >= now() -1m GROUP BY time(1m) fill(null);SELECT last(\"CAP_VAPOR_HABILITADO\") FROM \"CL_CALDEIRAS\" WHERE time >= now() - 5m GROUP BY time(5m) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":2060,"wires":[["5dc6eb9.73aab14"]]},{"id":"5dc6eb9.73aab14","type":"function","z":"6267b9e6.8530b8","name":"vapor_uti","func":"var retorno_cond= msg.payload[0][1].last\nvar pressao_caldeira_2=msg.payload[1][0].last.toFixed(2)\nvar cap_hab= msg.payload[2][0].last\n///############################################################\n\nif (cap_hab == \"1\"){\n    status_cap=\"Habilitado\"\n}\nelse if (cap_hab ==\"0\"){\n    status_cap= \"Desabilitado\"\n}\n\n\nquery = (\"\\n Retorno de Condensado está em: \" + retorno_cond +\" %.\\n\" +\"Pressão da Caldeira 2: \" + pressao_caldeira_2 +\" Kgf/cm^2.\\n\"+\"Status CAP: \" +status_cap+\".\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":2060,"wires":[["87f007dc.6ed7e8"]]},{"id":"f3b8bbc4.5a2ec8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"CO2","query":"SELECT last(\"VAZAO_CAPTACAO_CO2\")  / 10 FROM \"CL_CO2\" WHERE time >= now() - 1m GROUP BY time(5m) fill(null);SELECT last(\"VAZAO_CONSUMO_CO2\")  / 10 FROM \"CL_CO2\" WHERE time >= now() - 5m GROUP BY time(1m) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":2100,"wires":[["f0bc4ca6.765d8"]]},{"id":"f0bc4ca6.765d8","type":"function","z":"6267b9e6.8530b8","name":"co2_uti","func":"var cap_co2= msg.payload[0][0].last\nvar consumo_co2=msg.payload[1][5].last\n///############################################################\nquery = (\"\\n Vazão de Captação: \" + cap_co2 +\" Kg/h.\\n\" +\"Consumo de CO2: \"+consumo_co2+\" Kg/h.\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":2100,"wires":[["87f007dc.6ed7e8"]]},{"id":"87f007dc.6ed7e8","type":"link out","z":"6267b9e6.8530b8","name":"","links":["b3aad8f0.9ca418"],"x":835,"y":2120,"wires":[]},{"id":"106dc6c9.66e0e9","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"Frio","query":"SELECT last(\"PRESSAO_DISTRIBUICAO_AR\") FROM \"CL_REFRIGERACAO\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT last(\"PRESSAO_SUCCAO_FRIOS\")  / 100 FROM \"CL_REFRIGERACAO\" WHERE time >= now() - 1m GROUP BY time(2m) fill(null);SELECT last(\"DELTA_DESCARGA\")  / 10 FROM \"CL_REFRIGERACAO\" WHERE time >= now() - 1m GROUP BY time(2m) fill(null);SELECT last(\"value\") FROM \"status_mycom\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT last(\"value\") FROM \"status_mycom2\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT last(\"value\") FROM \"status_mycom3\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT last(\"value\") FROM \"status_mycom4\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":370,"y":2140,"wires":[["9f539ae7.091658"]]},{"id":"9f539ae7.091658","type":"function","z":"6267b9e6.8530b8","name":"frio_uti","func":"var pressao_ar= msg.payload[0][0].last.toFixed(2)\nvar pressao_succao=msg.payload[1][0].last\nvar delta_descarga=msg.payload[2][0].last\nvar mycom1_hab=msg.payload[3][0].last\nvar mycom2_hab=msg.payload[4][0].last\nvar mycom3_hab=msg.payload[5][0].last\nvar mycom4_hab=msg.payload[6][0].last\n///############################################################\n\nif (mycom1_hab ==true){\n    mycom1= \"Em funcionamento\"\n}\nelse if (mycom1_hab ==false){\n     mycom1=\"Desligado\"\n}\n\nif (mycom2_hab ==true){\n    mycom2= \"Em funcionamento\"\n}\nelse if (mycom2_hab ==false){\n     mycom2=\"Desligado\"\n}\nif (mycom3_hab ==true){\n    mycom3= \"Em funcionamento\"\n}\nelse if (mycom3_hab ==false){\n     mycom3=\"Desligado\"\n}\nif (mycom4_hab ==true){\n    mycom4= \"Em funcionamento\"\n}\nelse if (mycom4_hab ==false){\n     mycom4=\"Desligado\"\n}\n\nquery = (\"\\n Pressão de Ar Comprimido: \" + pressao_ar +\" BAR.\\n\" +\"Pressão de Sucção: \" +pressao_succao+\" BAR.\\n\"\n+\"DELTA Descarga:\" +delta_descarga +\" BAR.\\n\"\n+\"MYCOM 1:\" +mycom1 +\".\\n\"\n+\"MYCOM 2:\" +mycom2 +\".\\n\"\n+\"MYCOM 3:\" +mycom3 +\".\\n\"\n+\"MYCOM 4:\" +mycom4 +\".\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":610,"y":2140,"wires":[["87f007dc.6ed7e8"]]},{"id":"f764822b.73968","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"filtracao","query":"SELECT top(\"Vol_filtra1\", 3) FROM \"Filtracao\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);SELECT top(\"Vol_filtra2\", 3) FROM \"Filtracao\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":380,"y":2180,"wires":[["d3d9f8e3.50d638"]]},{"id":"d3d9f8e3.50d638","type":"function","z":"6267b9e6.8530b8","name":"filtracao","func":"\nvar efic_filtra1=msg.payload[0][0].top\nvar efic_filtra2=msg.payload[1][0].top\n///############################################################\n\n\n\nquery = (\"\\n Volume filtrado ciclo atual :\\n\"\n+\"Filtação 1: \"+efic_filtra1+\"HL/h.\\n\"\n+\"Filtação 2: \"+efic_filtra2+\"HL/h.\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":2180,"wires":[["87f007dc.6ed7e8"]]},{"id":"2329d18b.80a85e","type":"function","z":"6267b9e6.8530b8","name":"temp_ferm_ods","func":"\t\nvar od111_hora=msg.payload[0][0].top/60\t\t\t\nvar od111_minutos= msg.payload[0][0].top % 60\t\t\t\nvar od112_hora=msg.payload[1][0].top/60\t\t\t\nvar od112_minutos= msg.payload[1][0].top % 60\t\t\t\nvar od113_hora=msg.payload[2][0].top/60\t\t\t\nvar od113_minutos= msg.payload[2][0].top % 60\t\t\t\nvar od114_hora=msg.payload[3][0].top/60\t\t\t\nvar od114_minutos= msg.payload[3][0].top % 60\t\t\t\nvar od115_hora=msg.payload[4][0].top/60\t\t\t\nvar od115_minutos= msg.payload[4][0].top % 60\t\t\t\nvar od116_hora=msg.payload[5][0].top/60\t\t\t\nvar od116_minutos= msg.payload[5][0].top % 60\t\t\t\nvar od117_hora=msg.payload[6][0].top/60\t\t\t\nvar od117_minutos= msg.payload[6][0].top % 60\t\t\t\nvar od118_hora=msg.payload[7][0].top/60\t\t\t\nvar od118_minutos= msg.payload[7][0].top % 60\nvar od119_hora=msg.payload[8][0].top/60\t\t\t\nvar od119_minutos= msg.payload[8][0].top % 60\nvar od121_hora=msg.payload[9][0].top/60\t\t\t\nvar od121_minutos= msg.payload[9][0].top % 60\t\t\t\nvar od122_hora=msg.payload[10][0].top/60\t\t\t\nvar od122_minutos= msg.payload[10][0].top % 60\t\t\t\nvar od123_hora=msg.payload[11][0].top/60\t\t\t\nvar od123_minutos= msg.payload[11][0].top % 60\t\t\t\nvar od124_hora=msg.payload[12][0].top/60\t\t\t\nvar od124_minutos= msg.payload[12][0].top % 60\t\t\t\nvar od125_hora=msg.payload[13][0].top/60\t\t\t\nvar od125_minutos= msg.payload[13][0].top % 60\t\t\t\nvar od126_hora=msg.payload[14][0].top/60\t\t\t\nvar od126_minutos= msg.payload[14][0].top % 60\t\t\t\nvar od127_hora=msg.payload[15][0].top/60\t\t\t\nvar od127_minutos= msg.payload[15][0].top % 60\t\t\t\nvar od128_hora=msg.payload[16][0].top/60\t\t\t\nvar od128_minutos= msg.payload[16][0].top % 60\t\t\t\nvar od129_hora=msg.payload[17][0].top/60\t\t\t\nvar od129_minutos= msg.payload[17][0].top % 60\n\nvar od131_hora=msg.payload[18][0].top/60\nvar od131_minutos= msg.payload[18][0].top % 60\nvar od132_hora=msg.payload[19][0].top/60\nvar od132_minutos= msg.payload[19][0].top % 60\nvar od133_hora=msg.payload[20][0].top/60\nvar od133_minutos= msg.payload[20][0].top % 60\nvar od134_hora=msg.payload[21][0].top/60\nvar od134_minutos= msg.payload[21][0].top % 60\nvar od135_hora=msg.payload[22][0].top/60\nvar od135_minutos= msg.payload[22][0].top % 60\nvar od136_hora=msg.payload[23][0].top/60\nvar od136_minutos= msg.payload[23][0].top % 60\nvar od137_hora=msg.payload[24][0].top/60\nvar od137_minutos= msg.payload[24][0].top % 60\nvar od138_hora=msg.payload[25][0].top/60\nvar od138_minutos= msg.payload[25][0].top % 60\nvar od139_hora=msg.payload[26][0].top/60\nvar od139_minutos= msg.payload[26][0].top % 60\n\nvar od141_hora=msg.payload[27][0].top/60\nvar od141_minutos= msg.payload[27][0].top % 60\nvar od142_hora=msg.payload[28][0].top/60\nvar od142_minutos= msg.payload[28][0].top % 60\nvar od143_hora=msg.payload[29][0].top/60\nvar od143_minutos= msg.payload[29][0].top % 60\nvar od144_hora=msg.payload[30][0].top/60\nvar od144_minutos= msg.payload[30][0].top % 60\nvar od145_hora=msg.payload[31][0].top/60\nvar od145_minutos= msg.payload[31][0].top % 60\nvar od146_hora=msg.payload[32][0].top/60\nvar od146_minutos= msg.payload[32][0].top % 60\nvar od147_hora=msg.payload[33][0].top/60\nvar od147_minutos= msg.payload[33][0].top % 60\nvar od148_hora=msg.payload[34][0].top/60\nvar od148_minutos= msg.payload[34][0].top % 60\nvar od149_hora=msg.payload[35][0].top/60\nvar od149_minutos= msg.payload[35][0].top % 60\n\nquery = (\"\\n OD111-->\"+od111_hora.toFixed(0)+\" horas e \"+od111_minutos+\" minutos.\"\n+\"\\nOD112-->\"+od112_hora.toFixed(0)+\" horas e \"+od112_minutos+\" minutos.\"\n+\"\\nOD113-->\"+od113_hora.toFixed(0)+\" horas e \"+od113_minutos+\" minutos.\"\n+\"\\nOD114-->\"+od114_hora.toFixed(0)+\" horas e \"+od114_minutos+\" minutos.\"\n+\"\\nOD115-->\"+od115_hora.toFixed(0)+\" horas e \"+od115_minutos+\" minutos.\"\n+\"\\nOD116-->\"+od116_hora.toFixed(0)+\" horas e \"+od116_minutos+\" minutos.\"\n+\"\\nOD117-->\"+od117_hora.toFixed(0)+\" horas e \"+od117_minutos+\" minutos.\"\n+\"\\nOD118-->\"+od118_hora.toFixed(0)+\" horas e \"+od118_minutos+\" minutos.\"\n+\"\\nOD119-->\"+od119_hora.toFixed(0)+\" horas e \"+od119_minutos+\" minutos.\"\n+\"\\nOD121-->\"+od121_hora.toFixed(0)+\" horas e \"+od121_minutos+\" minutos.\"\n+\"\\nOD122-->\"+od122_hora.toFixed(0)+\" horas e \"+od122_minutos+\" minutos.\"\n+\"\\nOD123-->\"+od123_hora.toFixed(0)+\" horas e \"+od123_minutos+\" minutos.\"\n+\"\\nOD124-->\"+od124_hora.toFixed(0)+\" horas e \"+od124_minutos+\" minutos.\"\n+\"\\nOD125-->\"+od125_hora.toFixed(0)+\" horas e \"+od125_minutos+\" minutos.\"\n+\"\\nOD126-->\"+od126_hora.toFixed(0)+\" horas e \"+od126_minutos+\" minutos.\"\n+\"\\nOD127-->\"+od127_hora.toFixed(0)+\" horas e \"+od127_minutos+\" minutos.\"\n+\"\\nOD128-->\"+od128_hora.toFixed(0)+\" horas e \"+od128_minutos+\" minutos.\"\n+\"\\nOD129-->\"+od129_hora.toFixed(0)+\" horas e \"+od129_minutos+\" minutos.\"\n+\"\\nOD131-->\"+od131_hora.toFixed(0)+\" horas e \"+od131_minutos+\" minutos.\"\n+\"\\nOD132-->\"+od132_hora.toFixed(0)+\" horas e \"+od132_minutos+\" minutos.\"\n+\"\\nOD133-->\"+od133_hora.toFixed(0)+\" horas e \"+od133_minutos+\" minutos.\"\n+\"\\nOD134-->\"+od134_hora.toFixed(0)+\" horas e \"+od134_minutos+\" minutos.\"\n+\"\\nOD135-->\"+od135_hora.toFixed(0)+\" horas e \"+od135_minutos+\" minutos.\"\n+\"\\nOD136-->\"+od136_hora.toFixed(0)+\" horas e \"+od136_minutos+\" minutos.\"\n+\"\\nOD137-->\"+od137_hora.toFixed(0)+\" horas e \"+od137_minutos+\" minutos.\"\n+\"\\nOD138-->\"+od138_hora.toFixed(0)+\" horas e \"+od138_minutos+\" minutos.\"\n+\"\\nOD139-->\"+od139_hora.toFixed(0)+\" horas e \"+od139_minutos+\" minutos.\"\n+\"\\nOD141-->\"+od141_hora.toFixed(0)+\" horas e \"+od141_minutos+\" minutos.\"\n+\"\\nOD142-->\"+od142_hora.toFixed(0)+\" horas e \"+od142_minutos+\" minutos.\"\n+\"\\nOD143-->\"+od143_hora.toFixed(0)+\" horas e \"+od143_minutos+\" minutos.\"\n+\"\\nOD144-->\"+od144_hora.toFixed(0)+\" horas e \"+od144_minutos+\" minutos.\"\n+\"\\nOD145-->\"+od145_hora.toFixed(0)+\" horas e \"+od145_minutos+\" minutos.\"\n+\"\\nOD146-->\"+od146_hora.toFixed(0)+\" horas e \"+od146_minutos+\" minutos.\"\n+\"\\nOD147-->\"+od147_hora.toFixed(0)+\" horas e \"+od147_minutos+\" minutos.\"\n+\"\\nOD148-->\"+od148_hora.toFixed(0)+\" horas e \"+od148_minutos+\" minutos.\"\n+\"\\nOD149-->\"+od149_hora.toFixed(0)+\" horas e \"+od149_minutos+\" minutos.\");\nflow.set('curr_content', query);\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1420,"y":2060,"wires":[["3c3b80e3.d5c1"]]},{"id":"b6beb76c.04a4a8","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"Tempo_ferm_ods","query":"SELECT top(\"TEMPO_FERM_OD111\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD112\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD113\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD114\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD115\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD116\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD117\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD118\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD119\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD121\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD122\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD123\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD124\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD125\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD126\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD127\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD128\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD129\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD131\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD132\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD133\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD134\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD135\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD136\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD137\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD138\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD139\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD141\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD142\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD143\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD144\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD145\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD146\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD147\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null); SELECT top(\"TEMPO_FERM_OD148\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);  SELECT top(\"TEMPO_FERM_OD149\", 3) FROM \"adg_tempo_ferm\" WHERE time >= now() - 1m GROUP BY time(15s) fill(null);","rawOutput":false,"precision":"","retentionPolicy":"","x":1230,"y":2060,"wires":[["2329d18b.80a85e"]]},{"id":"1c64b117.c12d2f","type":"switch","z":"6267b9e6.8530b8","name":"brassagem","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"3.6.1","vt":"str"},{"t":"eq","v":"3.6.2","vt":"str"},{"t":"eq","v":"3.6.3","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":190,"y":2400,"wires":[[],["de297e52.8483"],["6ffcaf0c.d4901"]]},{"id":"de297e52.8483","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"brassagem_high_maltose","query":"SELECT top(\"Estoque_high_maltose_tq1\", 3)  / 10 FROM \"Brassagem\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);SELECT top(\"Estoque_high_maltose_tq2\", 3)  / 10 FROM \"Brassagem\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":410,"y":2400,"wires":[["449a9bec.a9c404"]]},{"id":"449a9bec.a9c404","type":"function","z":"6267b9e6.8530b8","name":"brassagem","func":"\nvar estoque_tq1= msg.payload[0][0].top\nvar estoque_tq2= msg.payload[1][0].top\n///############################################################\nquery = (\"\\n O estoque do Tanque 1 está em \"+ estoque_tq1 +\"%.\\n\"\n+\"O estoque do Tanque 2 está em \"+ estoque_tq2 +\"%.\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":630,"y":2400,"wires":[["6f61bacf.a26b04"]]},{"id":"e788291a.363df8","type":"inject","z":"6267b9e6.8530b8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1840,"y":2140,"wires":[[]]},{"id":"f16ac3cf.faac8","type":"function","z":"6267b9e6.8530b8","name":"tanque_vol_pck","func":"var volume_TP111= msg.payload[4][0].top\nvar volume_TP112= msg.payload[5][0].top\nvar volume_TP113= msg.payload[6][0].top\nvar volume_TP114= msg.payload[7][0].top\nvar volume_TP115= msg.payload[8][0].top\nvar volume_TP121= msg.payload[9][0].top\nvar volume_TP122= msg.payload[10][0].top\nvar volume_TP123= msg.payload[11][0].top\nvar volume_TP124= msg.payload[12][0].top\nvar volume_TP125= msg.payload[13][0].top\n\n\nvar tp_para_501 = msg.payload[0][0].top \nvar tp_para_502 = msg.payload[1][0].top\nvar tp_para_511 = msg.payload[2][0].top\nvar tp_para_512 = msg.payload[3][0].top\n//#######################################################\n\nif (tp_para_501  ==\"111\"){\n    vol_501 = volume_TP111\n    \n}\nelse if (tp_para_501 ==\"112\"){\n     vol_501 = volume_TP112\n}\nelse if (tp_para_501 ==\"113\"){\n     vol_501 = volume_TP113\n}\nelse if (tp_para_501 ==\"114\"){\n     vol_501 = volume_TP114\n}\nelse if (tp_para_501 ==\"115\"){\n     vol_501 = volume_TP115\n}\nelse if (tp_para_501 ==\"121\"){\n     vol_501 = volume_TP121\n}\nelse if (tp_para_501 ==\"122\"){\n     vol_501 = volume_TP122\n}\nelse if (tp_para_501 ==\"123\"){\n     vol_501 = volume_TP123\n}\nelse if (tp_para_501 ==\"124\"){\n     vol_501 = volume_TP124\n}\nelse if (tp_para_501 ==\"125\"){\n     vol_501 = volume_TP125\n}\nelse if (tp_para_501 ==\"0\"){\n     vol_501 = 0\n}\n//##############################################################\nif (tp_para_502  ==\"111\"){\n    vol_502 = volume_TP111\n    \n}\nelse if (tp_para_502 ==\"112\"){\n     vol_502 = volume_TP112\n}\nelse if (tp_para_502 ==\"113\"){\n     vol_502 = volume_TP113\n}\nelse if (tp_para_502 ==\"114\"){\n     vol_502 = volume_TP114\n}\nelse if (tp_para_502 ==\"115\"){\n     vol_502 = volume_TP115\n}\nelse if (tp_para_502 ==\"121\"){\n     vol_502 = volume_TP121\n}\nelse if (tp_para_502 ==\"122\"){\n     vol_502 = volume_TP122\n}\nelse if (tp_para_502 ==\"123\"){\n     vol_502 = volume_TP123\n}\nelse if (tp_para_502 ==\"124\"){\n     vol_502 = volume_TP124\n}\nelse if (tp_para_502 ==\"125\"){\n     vol_502 = volume_TP125\n}\nelse if (tp_para_502 ==\"0\"){\n     vol_502 = 0\n}\n//################################################################\nif (tp_para_511  ==\"111\"){\n    vol_511 = volume_TP111\n    \n}\nelse if (tp_para_511 ==\"112\"){\n     vol_511 = volume_TP112\n}\nelse if (tp_para_511 ==\"113\"){\n     vol_511 = volume_TP113\n}\nelse if (tp_para_511 ==\"114\"){\n     vol_511 = volume_TP114\n}\nelse if (tp_para_511 ==\"115\"){\n     vol_511 = volume_TP115\n}\nelse if (tp_para_511 ==\"121\"){\n     vol_511 = volume_TP121\n}\nelse if (tp_para_511 ==\"122\"){\n     vol_511 = volume_TP122\n}\nelse if (tp_para_511 ==\"123\"){\n     vol_511 = volume_TP123\n}\nelse if (tp_para_511 ==\"124\"){\n     vol_511 = volume_TP124\n}\nelse if (tp_para_511 ==\"125\"){\n     vol_511 = volume_TP125\n}\nelse if (tp_para_511 ==\"0\"){\n     vol_511 = 0\n}\n//#############################################################################\nif (tp_para_512  ==\"111\"){\n    vol_512 = volume_TP111\n    \n}\nelse if (tp_para_512 ==\"112\"){\n     vol_512 = volume_TP112\n}\nelse if (tp_para_512 ==\"113\"){\n     vol_512 = volume_TP113\n}\nelse if (tp_para_512 ==\"114\"){\n     vol_512 = volume_TP114\n}\nelse if (tp_para_512 ==\"115\"){\n     vol_512 = volume_TP115\n}\nelse if (tp_para_512 ==\"121\"){\n     vol_512 = volume_TP121\n}\nelse if (tp_para_512 ==\"122\"){\n     vol_512 = volume_TP122\n}\nelse if (tp_para_512 ==\"123\"){\n     vol_512 = volume_TP123\n}\nelse if (tp_para_512 ==\"124\"){\n     vol_512 = volume_TP124\n}\nelse if (tp_para_512 ==\"125\"){\n     vol_512 = volume_TP125\n}\nelse if (tp_para_512 ==\"0\"){\n     vol_512 = 0\n}\n//##############################################################################\n\nquery = (\"\\n A linha 501 está envasando do TP \" + tp_para_501 +\", o Volume do TP é \" + vol_501+\"Hl.\\n\" \n+ \"A linha 502 está envasando do TP \" + tp_para_502 +\", o Volume do TP é \" + vol_502+\"Hl.\\n\" \n+ \"A linha 511 está envasando do TP \" + tp_para_511 +\", o Volume do TP é \" + vol_511+\"Hl.\\n\"\n+ \"A linha 512 está envasando do TP \" + tp_para_512 +\", o Volume do TP é \" + vol_512+\"Hl.\");\nflow.set('curr_content', query);\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":2220,"wires":[["87f007dc.6ed7e8"]]},{"id":"a6fd94dd.024778","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"tp_envio","query":"SELECT top(\"TP_PARA_501\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"TP_PARA_502\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"TP_PARA_511\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"TP_PARA_512\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP111LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP112LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP113LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP114LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP115LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP121LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP122LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP123LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP124LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP125LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);","rawOutput":false,"precision":"","retentionPolicy":"","x":380,"y":2220,"wires":[["f16ac3cf.faac8"]]},{"id":"29448a7b.8bc7c6","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_envio_501","query":"SELECT top(\"TP_PARA_501\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP111LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP112LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP113LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP114LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP115LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP121LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP122LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP123LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP124LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP125LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"STATUS_501\", 3) FROM \"PB_LMS\" WHERE time >= now() - 1m GROUP BY time(1s) fill(null);","rawOutput":false,"precision":"","retentionPolicy":"","x":300,"y":140,"wires":[["c1617978.13e2d8"]]},{"id":"c1617978.13e2d8","type":"function","z":"e428c615.0e1c58","name":"L501","func":"var volume_TP111= msg.payload[1][0].top\nvar volume_TP112= msg.payload[2][0].top\nvar volume_TP113= msg.payload[3][0].top\nvar volume_TP114= msg.payload[4][0].top\nvar volume_TP115= msg.payload[5][0].top\nvar volume_TP121= msg.payload[6][0].top\nvar volume_TP122= msg.payload[7][0].top\nvar volume_TP123= msg.payload[8][0].top\nvar volume_TP124= msg.payload[9][0].top\nvar volume_TP125= msg.payload[10][0].top\n\nvar tp_para_501 = msg.payload[0][0].top \n\nvar status_ech_501 = msg.payload[11][0].top\n\n//#################condição de envio msg######################################\nif       ((volume_TP111 <=  50) && (tp_para_501 == 111) && (status_ech_501 == 128)){\n    alerta501 = volume_TP111 \n}else if ((volume_TP112 <=  50) && (tp_para_501 == 112) && (status_ech_501 == 128)){\n    alerta501 = volume_TP112\n}else if ((volume_TP113 <=  50) && (tp_para_501 == 113) && (status_ech_501 == 128)){\n    alerta501 = volume_TP113\n}else if ((volume_TP114 <=  50) && (tp_para_501 == 114) && (status_ech_501 == 128)){\n    alerta501 = volume_TP114\n}else if ((volume_TP115 <=  50) && (tp_para_501 == 115) && (status_ech_501 == 128)){\n    alerta501 =  volume_TP115\n}else if ((volume_TP121 <=  50) && (tp_para_501 == 121) && (status_ech_501 == 128)){\n    alerta501 = volume_TP121\n}else if ((volume_TP122 <=  50) && (tp_para_501 == 122) && (status_ech_501 == 128)){\n    alerta501 = volume_TP122\n}else if ((volume_TP123 <=  50) && (tp_para_501 == 123) && (status_ech_501 == 128)){\n    alerta501 = volume_TP123\n}else if ((volume_TP124 <=  50) && (tp_para_501 == 124) && (status_ech_501 == 128)){\n    alerta501 =volume_TP124\n}else if ((volume_TP125 <=  50) && (tp_para_501 == 125) && (status_ech_501 == 128)){\n    alerta501 = volume_TP125\n}else{\n\talerta501 = -1\n}\n\nif (alerta501 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nATENÇÃO: A linha 501 está recebendo produto do TP \" + tp_para_501+\" .\\n\"\n\t+\"O volume está em \"+alerta501+ \"Hl e em breve haverá troca de tanque.\\n\")\n\treturn msg;\n}\n//}else{\n//\tmsg.payload.type    = 'message'\n//\tmsg.payload.chatId  = -796510825\n//\tmsg.payload.content = (\"\\nEstá tudo bem com a linha.\\n\")\n//}\n\n//return msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":140,"wires":[["16dc0f08.f7faf1"]]},{"id":"b87b4bba.7daf88","type":"function","z":"e428c615.0e1c58","name":"L502","func":"var volume_TP111= msg.payload[1][0].top\nvar volume_TP112= msg.payload[2][0].top\nvar volume_TP113= msg.payload[3][0].top\nvar volume_TP114= msg.payload[4][0].top\nvar volume_TP115= msg.payload[5][0].top\nvar volume_TP121= msg.payload[6][0].top\nvar volume_TP122= msg.payload[7][0].top\nvar volume_TP123= msg.payload[8][0].top\nvar volume_TP124= msg.payload[9][0].top\nvar volume_TP125= msg.payload[10][0].top\n\nvar tp_para_502 = msg.payload[0][0].top \n\nvar status_ech_502 = msg.payload[11][0].top\n\n//#################condição de envio msg######################################\nif       ((volume_TP111 <=  50) && (tp_para_502 == 111) && (status_ech_502 == 128)){\n    alerta502 = volume_TP111 \n}else if ((volume_TP112 <=  50) && (tp_para_502 == 112) && (status_ech_502 == 128)){\n    alerta502 = volume_TP112\n}else if ((volume_TP113 <=  50) && (tp_para_502 == 113) && (status_ech_502 == 128)){\n    alerta502 = volume_TP113\n}else if ((volume_TP114 <=  50) && (tp_para_502 == 114) && (status_ech_502 == 128)){\n    alerta502 = volume_TP114\n}else if ((volume_TP115 <=  50) && (tp_para_502 == 115) && (status_ech_502 == 128)){\n    alerta502 =  volume_TP115\n}else if ((volume_TP121 <=  50) && (tp_para_502 == 121) && (status_ech_502 == 128)){\n    alerta502 = volume_TP121\n}else if ((volume_TP122 <=  50) && (tp_para_502 == 122) && (status_ech_502 == 128)){\n    alerta502 = volume_TP122\n}else if ((volume_TP123 <=  50) && (tp_para_502 == 123) && (status_ech_502 == 128)){\n    alerta502 = volume_TP123\n}else if ((volume_TP124 <=  50) && (tp_para_502 == 124) && (status_ech_502 == 128)){\n    alerta502 =volume_TP124\n}else if ((volume_TP125 <=  50) && (tp_para_502 == 125) && (status_ech_502 == 128)){\n    alerta502 = volume_TP125\n}else{\n\talerta502 = -1\n}\n\nif (alerta502 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nATENÇÃO: A linha 502 está recebendo produto do TP \" + tp_para_502+\" .\\n\"\n\t+\"O volume está em \"+alerta502+ \"Hl e em breve haverá troca de tanque.\\n\")\n\treturn msg;\n}\n//}else{\n//\tmsg.payload.type    = 'message'\n//\tmsg.payload.chatId  = -796510825\n//\tmsg.payload.content = (\"\\nEstá tudo bem com a linha.\\n\")\n//}\n\n//return msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":180,"wires":[["16dc0f08.f7faf1"]]},{"id":"c8b3a9e9.bb6ee8","type":"function","z":"e428c615.0e1c58","name":"L511","func":"var volume_TP111= msg.payload[1][0].top\nvar volume_TP112= msg.payload[2][0].top\nvar volume_TP113= msg.payload[3][0].top\nvar volume_TP114= msg.payload[4][0].top\nvar volume_TP115= msg.payload[5][0].top\nvar volume_TP121= msg.payload[6][0].top\nvar volume_TP122= msg.payload[7][0].top\nvar volume_TP123= msg.payload[8][0].top\nvar volume_TP124= msg.payload[9][0].top\nvar volume_TP125= msg.payload[10][0].top\n\nvar tp_para_511 = msg.payload[0][0].top \n\nvar status_ech_511 = msg.payload[11][0].top\n\n//#################condição de envio msg######################################\nif       ((volume_TP111 <=  70) && (tp_para_511 == 111) && (status_ech_511 == 128)){\n    alerta511 = volume_TP111 \n}else if ((volume_TP112 <=  70) && (tp_para_511 == 112) && (status_ech_511 == 128)){\n    alerta511 = volume_TP112\n}else if ((volume_TP113 <=  70) && (tp_para_511 == 113) && (status_ech_511 == 128)){\n    alerta511 = volume_TP113\n}else if ((volume_TP114 <=  70) && (tp_para_511 == 114) && (status_ech_511 == 128)){\n    alerta511 = volume_TP114\n}else if ((volume_TP115 <=  70) && (tp_para_511 == 115) && (status_ech_511 == 128)){\n    alerta511 =  volume_TP115\n}else if ((volume_TP121 <=  70) && (tp_para_511 == 121) && (status_ech_511 == 128)){\n    alerta511 = volume_TP121\n}else if ((volume_TP122 <=  70) && (tp_para_511 == 122) && (status_ech_511 == 128)){\n    alerta511 = volume_TP122\n}else if ((volume_TP123 <=  70) && (tp_para_511 == 123) && (status_ech_511 == 128)){\n    alerta511 = volume_TP123\n}else if ((volume_TP124 <=  70) && (tp_para_511 == 124) && (status_ech_511 == 128)){\n    alerta511 =volume_TP124\n}else if ((volume_TP125 <=  70) && (tp_para_511 == 125) && (status_ech_511 == 128)){\n    alerta511 = volume_TP125\n}else{\n\talerta511 = -1\n}\n\nif (alerta511 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nATENÇÃO: A linha 511 está recebendo produto do TP \" + tp_para_511+\" .\\n\"\n\t+\"O volume está em \"+alerta511+ \"Hl e em breve haverá troca de tanque.\\n\")\n\treturn msg;\n}\n//}else{\n//\tmsg.payload.type    = 'message'\n//\tmsg.payload.chatId  = -796510825\n//\tmsg.payload.content = (\"\\nEstá tudo bem com a linha.\\n\")\n//}\n\n//return msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":220,"wires":[["16dc0f08.f7faf1"]]},{"id":"d313312e.e391a","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_envio_502","query":"SELECT top(\"TP_PARA_502\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP111LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP112LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP113LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP114LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP115LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP121LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP122LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP123LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP124LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP125LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"STATUS_502\", 3) FROM \"PB_LMS\" WHERE time >= now() - 1m GROUP BY time(1s) fill(null);","rawOutput":false,"precision":"","retentionPolicy":"","x":300,"y":180,"wires":[["b87b4bba.7daf88"]]},{"id":"1638d90.ba8e427","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_envio_511","query":" SELECT top(\"TP_PARA_511\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP_PARA_502\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP_PARA_501\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP111LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP112LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP113LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP114LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP115LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP121LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP122LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP123LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP124LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP125LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"STATUS_511\", 3) FROM \"PB_LMS\" WHERE time >= now() - 1m GROUP BY time(1s) fill(null);","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":220,"wires":[["c8b3a9e9.bb6ee8"]]},{"id":"a1f8e8e7.6e8208","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_envio_512","query":"SELECT top(\"TP_PARA_512\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null); SELECT top(\"TP111LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP112LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP113LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP114LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP115LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP121LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP122LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP123LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP124LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"TP125LT01\",3)  / 10 FROM \"DADOS_TPS\" WHERE time >= now() - 1m GROUP BY time(1m) fill(null);SELECT top(\"STATUS_512\", 3) FROM \"PB_LMS\" WHERE time >= now() - 1m GROUP BY time(1s) fill(null);","rawOutput":false,"precision":"","retentionPolicy":"","x":300,"y":260,"wires":[["c953b493.3dc688"]]},{"id":"16dc0f08.f7faf1","type":"telegram sender","z":"e428c615.0e1c58","name":"Alertas_Crab","bot":"23462907.3b7c56","haserroroutput":false,"outputs":1,"x":690,"y":260,"wires":[["1b1ee19f.24b52e"]]},{"id":"ea00340b.8706e8","type":"inject","z":"6267b9e6.8530b8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":440,"y":2580,"wires":[[]]},{"id":"6ffcaf0c.d4901","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"tempo_filtro_prensa","query":"SELECT top(\"Tempo_Fabrico\", 3) FROM \"Brassagem\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null);SELECT top(\"numero_fabrico\", 3) FROM \"Brassagem\" WHERE time >= now() - 1m GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":400,"y":2440,"wires":[["6916cf1e.85eeb"]]},{"id":"6916cf1e.85eeb","type":"function","z":"6267b9e6.8530b8","name":"tempo_filtro_prensa","func":"\nvar tempo_fabrico= msg.payload[0][0].top\nvar numero_fabrico= msg.payload[1][0].top\n///############################################################\nquery = (\"\\n Tempo de filtração do fabrico atual \"+ tempo_fabrico +\" minutos.O número do fabrico é \"+numero_fabrico+\".\\n\");\nflow.set('curr_content', query);\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":660,"y":2440,"wires":[["6f61bacf.a26b04"]]},{"id":"574dcf31.449d2","type":"function","z":"6267b9e6.8530b8","name":"status_ech","func":"var status_ech_501=msg.payload[0][0].top\nvar status_ech_502=msg.payload[1][0].top\nvar status_ech_511=msg.payload[2][0].top\nvar status_ech_512=msg.payload[3][0].top\n\nswitch (status_ech_501){\n    case 1:\n    status_501 = 'Parada';\n    break;\n     case 2:\n    status_501 = 'Iniciando';\n    break;\n     case 4:\n    status_501 = 'Preparada';\n    break;\n     case 8:\n    status_501 = 'Insuficiência de Latas';\n    break;\n     case 16:\n    status_501 = 'Saída Acumulada';\n    break;\n     case 128:\n    status_501 = 'Operando';\n    break;\n     case 1024:\n    status_501 = 'Falha Interna';\n    break;\n     case 2048:\n    status_501 = 'Falha Externa';\n    break;\n     case 4096:\n    status_501 = 'Parada de Emergência';\n    break;\n     case 16384:\n    status_501 = 'Falha Transporte de Entrada';\n    break;\n    default:\n    status_501 = 'Falha sem identificação';\n}\n//##############502###################################\nswitch (status_ech_502){\n    case 1:\n    status_502 = 'Parada';\n    break;\n     case 2:\n    status_502 = 'Iniciando';\n    break;\n     case 4:\n    status_502 = 'Preparada';\n    break;\n     case 8:\n    status_502 = 'Insuficiência de Latas';\n    break;\n     case 16:\n    status_502 = 'Saída Acumulada';\n    break;\n     case 128:\n    status_502 = 'Operando';\n    break;\n     case 1024:\n    status_502 = 'Falha Interna';\n    break;\n     case 2048:\n    status_502 = 'Falha Externa';\n    break;\n     case 4096:\n    status_502 = 'Parada de Emergência';\n    break;\n     case 16384:\n    status_502 = 'Falha Transporte de Entrada';\n    break;\n    default:\n    status_502 = 'Falha sem identificação';\n}\n//##############511###################################\nswitch (status_ech_511){\n    case 1:\n    status_511 = 'Parada';\n    break;\n     case 2:\n    status_511 = 'Iniciando';\n    break;\n     case 4:\n    status_511 = 'Preparada';\n    break;\n     case 8:\n    status_511 = 'Insuficiência de Latas';\n    break;\n     case 16:\n    status_511 = 'Saída Acumulada';\n    break;\n     case 128:\n    status_511 = 'Operando';\n    break;\n     case 1024:\n    status_511 = 'Falha Interna';\n    break;\n     case 2048:\n    status_511 = 'Falha Externa';\n    break;\n     case 4096:\n    status_511 = 'Parada de Emergência';\n    break;\n     case 16384:\n    status_511 = 'Falha Transporte de Entrada';\n    break;\n    default:\n    status_511 = 'Falha sem identificação';\n}\n\n//##############512###################################\nswitch (status_ech_512){\n    case 1:\n    status_512 = 'Parada';\n    break;\n     case 2:\n    status_512 = 'Iniciando';\n    break;\n     case 4:\n    status_512 = 'Preparada';\n    break;\n     case 8:\n    status_512 = 'Insuficiência de Latas';\n    break;\n     case 16:\n    status_512 = 'Saída Acumulada';\n    break;\n     case 128:\n    status_512 = 'Operando';\n    break;\n     case 1024:\n    status_512 = 'Falha Interna';\n    break;\n     case 2048:\n    status_512 = 'Falha Externa';\n    break;\n     case 4096:\n    status_512 = 'Parada de Emergência';\n    break;\n     case 16384:\n    status_512 = 'Falha Transporte de Entrada';\n    break;\n    default:\n    status_512 = 'Falha sem identificação';\n}\n\nquery = (\"\\n O Status atual da Enchedora da 501 é: \" + status_501 +\".\\n\"\n+ \"O Status atual da Enchedora da 502 é: \" + status_502 +\".\\n\"\n+ \"O Status atual da Enchedora da 511 é: \" + status_511 +\".\\n\"\n+ \"O Status atual da Enchedora da 512 é: \" + status_512 +\".\\n\");\nflow.set('curr_content', query);\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":630,"y":2260,"wires":[["87f007dc.6ed7e8"]]},{"id":"f7fdef17.3d56a","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"Status ECH","query":"SELECT top(\"STATUS_501\", 3) FROM \"PB_LMS\" WHERE time >= now() - 20s GROUP BY time(20s) fill(null);SELECT top(\"STATUS_502\", 3) FROM \"PB_LMS\" WHERE time >= now() - 20s GROUP BY time(20s) fill(null);SELECT top(\"STATUS_511\", 3) FROM \"PB_LMS\" WHERE time >= now() - 20s GROUP BY time(20s) fill(null);SELECT top(\"STATUS_512\", 3) FROM \"PB_LMS\" WHERE time >= now() - 20s GROUP BY time(20s) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":390,"y":2260,"wires":[["574dcf31.449d2"]]},{"id":"c953b493.3dc688","type":"function","z":"e428c615.0e1c58","name":"L512","func":"var volume_TP111= msg.payload[1][0].top\nvar volume_TP112= msg.payload[2][0].top\nvar volume_TP113= msg.payload[3][0].top\nvar volume_TP114= msg.payload[4][0].top\nvar volume_TP115= msg.payload[5][0].top\nvar volume_TP121= msg.payload[6][0].top\nvar volume_TP122= msg.payload[7][0].top\nvar volume_TP123= msg.payload[8][0].top\nvar volume_TP124= msg.payload[9][0].top\nvar volume_TP125= msg.payload[10][0].top\n\nvar tp_para_512 = msg.payload[0][0].top \n\nvar status_ech_512 = msg.payload[11][0].top\n\n//#################condição de envio msg######################################\nif       ((volume_TP111 <=  70) && (tp_para_512 == 111) && (status_ech_512 == 128)){\n    alerta512 = volume_TP111 \n}else if ((volume_TP112 <=  70) && (tp_para_512 == 112) && (status_ech_512 == 128)){\n    alerta512 = volume_TP112\n}else if ((volume_TP113 <=  70) && (tp_para_512 == 113) && (status_ech_512 == 128)){\n    alerta512 = volume_TP113\n}else if ((volume_TP114 <=  70) && (tp_para_512 == 114) && (status_ech_512 == 128)){\n    alerta512 = volume_TP114\n}else if ((volume_TP115 <=  70) && (tp_para_512 == 115) && (status_ech_512 == 128)){\n    alerta512 =  volume_TP115\n}else if ((volume_TP121 <=  70) && (tp_para_512 == 121) && (status_ech_512 == 128)){\n    alerta512 = volume_TP121\n}else if ((volume_TP122 <=  70) && (tp_para_512 == 122) && (status_ech_512 == 128)){\n    alerta512 = volume_TP122\n}else if ((volume_TP123 <=  70) && (tp_para_512 == 123) && (status_ech_512 == 128)){\n    alerta512 = volume_TP123\n}else if ((volume_TP124 <=  70) && (tp_para_512 == 124) && (status_ech_512 == 128)){\n    alerta512 =volume_TP124\n}else if ((volume_TP125 <=  70) && (tp_para_512 == 125) && (status_ech_512 == 128)){\n    alerta512 = volume_TP125\n}else{\n\talerta512 = -1\n}\n\nif (alerta512 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nATENÇÃO: A linha 512 está recebendo produto do TP \" + tp_para_512+\" .\\n\"\n\t+\"O volume está em \"+alerta512+ \"Hl e em breve haverá troca de tanque.\\n\")\n\treturn msg;\n}\n//}else{\n//\tmsg.payload.type    = 'message'\n//\tmsg.payload.chatId  = -796510825\n//\tmsg.payload.content = (\"\\nEstá tudo bem com a linha.\\n\")\n//}\n\n//return msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":450,"y":260,"wires":[["16dc0f08.f7faf1"]]},{"id":"88bd8657.d4aee8","type":"inject","z":"e428c615.0e1c58","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"300","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":200,"wires":[["29448a7b.8bc7c6","d313312e.e391a","1638d90.ba8e427","a1f8e8e7.6e8208"]]},{"id":"e5d6236c.adc99","type":"inject","z":"e428c615.0e1c58","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"180","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":90,"y":340,"wires":[["e1f139.59b9fec8","da905d11.fab8c","4ed5a5dd.82758c","bc197850.fd7bd8"]]},{"id":"e1f139.59b9fec8","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_512_atual","query":"SELECT top(\"TP_PARA_512\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 5m GROUP BY time(60s) fill(null); ","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":340,"wires":[["663baf06.b1e3e"]]},{"id":"663baf06.b1e3e","type":"function","z":"e428c615.0e1c58","name":"L512_TP_atual","func":"\nvar tp_para_512_old = msg.payload[0].top \nvar tp_para_512_new = msg.payload[4].top \n\n\n\n//#################condição de envio msg######################################\nif       ( tp_para_512_new !== tp_para_512_old) {\n         alerta512 =  tp_para_512_new\n\t\t\n}\nelse \n  alerta512= -1\n\nif (alerta512 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nA linha 512 agora está sendo abastecida pelo TP \"+alerta512+\".\\n\")\n\treturn msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":340,"wires":[["16dc0f08.f7faf1"]]},{"id":"da905d11.fab8c","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_511_atual","query":"SELECT top(\"TP_PARA_511\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 5m GROUP BY time(60s) fill(null); ","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":380,"wires":[["f6737e29.539f2"]]},{"id":"4ed5a5dd.82758c","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_502_atual","query":"SELECT top(\"TP_PARA_502\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 5m GROUP BY time(60s) fill(null); ","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":420,"wires":[["27ffa249.77207e"]]},{"id":"bc197850.fd7bd8","type":"influxdb in","z":"e428c615.0e1c58","influxdb":"8e05a758.3df478","name":"tp_501_atual","query":"SELECT top(\"TP_PARA_501\", 3) FROM \"DADOS_TPS\" WHERE time >= now() - 5m GROUP BY time(60s) fill(null); ","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":460,"wires":[["cfe3b23d.0e297"]]},{"id":"f6737e29.539f2","type":"function","z":"e428c615.0e1c58","name":"L511_TP_atual","func":"\nvar tp_para_511_old = msg.payload[0].top \nvar tp_para_511_new = msg.payload[4].top \n\n\n\n//#################condição de envio msg######################################\nif       ( tp_para_511_new !== tp_para_511_old) {\n         alerta511 =  tp_para_511_new\n\t\t\n}\nelse \n  alerta511= -1\n\nif (alerta511 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nA linha 511 agora está sendo abastecida pelo TP \"+alerta511+\".\\n\")\n\treturn msg;\n}\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":380,"wires":[["16dc0f08.f7faf1"]]},{"id":"27ffa249.77207e","type":"function","z":"e428c615.0e1c58","name":"L502_TP_atual","func":"\nvar tp_para_502_old = msg.payload[0].top \nvar tp_para_502_new = msg.payload[4].top \n\n\n\n//#################condição de envio msg######################################\nif       ( tp_para_502_new !== tp_para_502_old) {\n         alerta502 =  tp_para_502_new\n\t\t\n}\nelse \n  alerta502= -1\n\nif (alerta502 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nA linha 502 agora está sendo abastecida pelo TP \"+alerta502+\".\\n\")\n\treturn msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":420,"wires":[["16dc0f08.f7faf1"]]},{"id":"cfe3b23d.0e297","type":"function","z":"e428c615.0e1c58","name":"L501_TP_atual","func":"\nvar tp_para_501_old = msg.payload[0].top \nvar tp_para_501_new = msg.payload[4].top \n\n\n\n//#################condição de envio msg######################################\nif       ( tp_para_501_new !== tp_para_501_old) {\n         alerta501 =  tp_para_501_new\n\t\t\n}\nelse \n  alerta501= -1\n\nif (alerta501 > -1){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\nA linha 501 agora está sendo abastecida pelo TP \"+alerta501+\".\\n\")\n\treturn msg;\n}\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":460,"wires":[["16dc0f08.f7faf1"]]},{"id":"f80172f1.fb7eb","type":"influxdb out","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"telegram","measurement":"telegram","precision":"","retentionPolicy":"","x":1400,"y":360,"wires":[]},{"id":"3f2b57d4.9e7158","type":"function","z":"6267b9e6.8530b8","name":"telegram_influx","func":"var nome_usuario= msg.payload.content.chat.first_name;\nvar chat_id = msg.payload.chatId\nvar obj={\n    usuario:nome_usuario,\n    chat_id:chat_id\n}\n   return { payload: obj };","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1220,"y":360,"wires":[["f80172f1.fb7eb"]]},{"id":"2cd7b9b4.9c5e26","type":"debug","z":"6267b9e6.8530b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1490,"y":220,"wires":[]},{"id":"6f9e4a46.a06da4","type":"inject","z":"6267b9e6.8530b8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":120,"y":2820,"wires":[["28e618e7.490a68"]]},{"id":"34408703.5cc938","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT non_negative_difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":280,"y":2780,"wires":[["52c00bad.69e084"]]},{"id":"28e618e7.490a68","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":280,"y":2820,"wires":[["7e699502.25576c"]]},{"id":"ac780162.10a9b","type":"influxdb in","z":"6267b9e6.8530b8","influxdb":"8e05a758.3df478","name":"PB_L501","query":"SELECT difference(max(\"F8[1]\")) FROM \"PACK_COLETA\" WHERE time >= now() - 24h GROUP BY time(1h) fill(null)","rawOutput":false,"precision":"h","retentionPolicy":"","x":280,"y":2860,"wires":[["a208731d.a1ef8"]]},{"id":"52c00bad.69e084","type":"function","z":"6267b9e6.8530b8","name":"TA_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'A'\nvar linha = '501'\nvar query  = '';\nvar lower_b = 0;\nvar upper_b = 7;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].non_negative_difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n        \n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['non_negative_difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['non_negative_difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n'+ \"Ou seja,\"+ sum_turno * 0.003+\"hL\" );\n//query = query.concat(\"\\nA produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno A 501\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":470,"y":2780,"wires":[["c4b69c31.e971c"]]},{"id":"7e699502.25576c","type":"function","z":"6267b9e6.8530b8","name":"TB_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'B'\nvar linha = '501'\nvar query = ''; //'Os dados de produção bruta linha ' + linha + ' no turno ' + turno +  ' são: \\n \\n';\nvar lower_b = 8;\nvar upper_b = 15;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n'+ \"Ou seja,\"+ sum_turno * 0.003+\"hL\" );\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno B 501\");\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":470,"y":2820,"wires":[["c4b69c31.e971c"]]},{"id":"a208731d.a1ef8","type":"function","z":"6267b9e6.8530b8","name":"TC_PB_L501","func":"var month=new Array();\nmonth = [01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12];\n\nvar weekday=new Array();\nweekday= [\"Dom\", \"Seg\", \"Terç\", \"Qua\", \"Qui\", \"Sex\",\"Sáb\"];\n\nfunction convertTZ(date, tzString) {\n    const locale = 'pt-br'\n    return new Date((typeof date === \"string\" ? new Date(date) : date)\n    .toLocaleString(locale, {timeZone: tzString}));\n}\n\nfunction pad(num, size) {\n    num = num.toString();\n    while (num.length < size) num = \"0\" + num;\n    return num;\n}\n\nfunction process_pb(pb_mean) {\n    if (pb_mean == null || pb_mean == 0){\n        return 0;\n    } else{\n        return pb_mean;\n    }\n}\n\nfunction process_sum(sum) {\n    if (sum == 'NaN' || sum == 0){\n        return 0;\n    } else{\n        return sum;\n    }\n}\n\nvar arr = msg.payload;\nvar turno = 'C'\nvar linha = '501'\nvar query = '';\nvar lower_b = 16;\nvar upper_b = 23;\nvar sum_turno = 0;\nvar sum_day = 0\nvar first_day = true;\nvar ult_horaria = msg.payload[23].difference;\n\nfor (var i = 0; i < arr.length; i++){\n    var obj = arr[i];\n    var timestamp = convertTZ(obj['time'], \"America/Sao_Paulo\");\n    \n    var hour = timestamp.getHours();\n    \n    if (hour >= lower_b && hour <= upper_b){\n        var day_curr = timestamp.getDate();\n        if (first_day == true){\n            first_day = false;\n            var day_prev = day_curr;\n            var minutes = '59';\n        }\n        else{\n            var minutes = pad(timestamp.getMinutes(), 2);\n        }\n        if (day_curr != day_prev){\n            break;\n        }\n\n        var wkday = weekday[timestamp.getDay()];\n        var day = pad(day_curr, 2);\n        var mth = pad(month[timestamp.getMonth()], 2);\n        var year = timestamp.getFullYear();\n        var hour_converted = pad(hour, 2);\n\n        var row_timestamp = hour_converted + \":\" + minutes ;\n        var pb_mean = process_pb(obj['difference']);\n        sum_turno = sum_turno + pb_mean;\n        \n        query = query.concat(row_timestamp + ' > ' + pb_mean + ' garrafas', '\\n');\n        var day_prev = day_curr;\n    }\n     \n    if (hour >= 0 && hour <= convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getHours()) {\n        if(timestamp.getDate() == convertTZ(arr[0]['time'], \"America/Sao_Paulo\").getDate()){\n            sum_day = sum_day + process_pb(obj['difference']);    \n        }\n        \n    }\n}\n\n\nvar percentage = process_sum(((sum_turno/sum_day)*100).toFixed(2));\n\nvar query_title = 'Esses são os dados de produção bruta da Linha ' + linha + ' no Turno ' + turno + ' do dia ' + day + \"/\" + mth + \"/\" + year + \" (\" +  wkday +\"): \\n\\n\";\nquery = query_title.concat(query);\n\nquery = query.concat(\"\\nA produção total bruta da linha no turno \" + turno + \" foi de \" + sum_turno + ' garrafas.\\n\\n'+ \"Ou seja,\"+ sum_turno * 0.003+\"hL\");\n//query = query.concat(\"A produção total bruta da linha \"+ linha +\" desde 00:00 até o momento foi de \" + sum_day + \" garrafas.\");\n//query = query.concat(\"\\nA última horaria foi de \" + ult_horaria + \" garrafas.\" );\n\nflow.set('curr_content', undefined);\nflow.set('curr_content', query);\n\nnode.warn(\"Turno C 501\");\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":2860,"wires":[["c4b69c31.e971c"]]},{"id":"c4b69c31.e971c","type":"debug","z":"6267b9e6.8530b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":670,"y":2800,"wires":[]},{"id":"abdbcbf6.268938","type":"influxdb in","z":"9a9a7718.e7e1a8","influxdb":"8e05a758.3df478","name":"recirculacao_filt2","query":"SELECT top(\"Filtracao2_recir\", 3) FROM \"Filtracao\" WHERE time >= now() - 2m GROUP BY time(500ms) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":280,"wires":[["3f37c5f0.dab6ca"]]},{"id":"e0dc1fb9.e839b","type":"debug","z":"9a9a7718.e7e1a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.content","targetType":"msg","statusVal":"","statusType":"auto","x":680,"y":280,"wires":[]},{"id":"e30677c3.932408","type":"inject","z":"9a9a7718.e7e1a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"180","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":110,"y":300,"wires":[["abdbcbf6.268938","53e7adef.20a564"]]},{"id":"38abc604.428caa","type":"function","z":"9a9a7718.e7e1a8","name":"","func":"const time= Date.now();\nvar time_last= flow.get('time_last');\nvar result=0;\nvar recir_filt2=msg.payload[0].top\n\n    if(recir_filt2===1){\n        flow.set('time_last',time); \n        result=(time-time_last); \n        if(result===time){\n            result= 0; \n            }\n    }\n    \nconst tempo_recirc = {\n    tempo_recir_filt2:result,\n}\nreturn { payload: tempo_recirc };\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":120,"wires":[[]]},{"id":"e84a1515.1676a8","type":"inject","z":"9a9a7718.e7e1a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":100,"y":180,"wires":[[]]},{"id":"f8e01b9d.b92688","type":"function","z":"9a9a7718.e7e1a8","name":"recir_off","func":"\nvar recirculaOff=msg.payload[0].top \nvar recirculaOn= msg.payload[1].top \n\n\n//#################condição de envio msg######################################\n\nif ( recirculaOn !== recirculaOff){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"No momento a Filtração 2 entrou em recirculação.\\n\")\n\treturn msg;\n }\n \n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":340,"y":180,"wires":[[]]},{"id":"53e7adef.20a564","type":"influxdb in","z":"9a9a7718.e7e1a8","influxdb":"8e05a758.3df478","name":"recirculacao_filt1","query":"SELECT top(\"Filtracao1_recir\", 3) FROM \"Filtracao\" WHERE time >= now() - 2m GROUP BY time(500ms) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":320,"wires":[["52aa0477.ce449c"]]},{"id":"52aa0477.ce449c","type":"function","z":"9a9a7718.e7e1a8","name":"recir_off_filt1","func":"\n \nvar recirculaOn= msg.payload[0].top \n\n\n//#################condição de envio msg######################################\nif  (recirculaOn==1){\n    msgRecircula = \"Filtração 1 está em circulação\"\n}\n\nelse{\n    msgRecircula = -1\n}\n\nif ( recirculaOn==1 ){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\n \"+msgRecircula+\".\\n\")\n\treturn msg;\n}\n \n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":490,"y":320,"wires":[["cd02d985.840ad8"]]},{"id":"cd02d985.840ad8","type":"debug","z":"9a9a7718.e7e1a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.content","targetType":"msg","statusVal":"","statusType":"auto","x":680,"y":320,"wires":[]},{"id":"3f37c5f0.dab6ca","type":"function","z":"9a9a7718.e7e1a8","name":"recir_off_filt2","func":"\n \nvar recirculaOn= msg.payload[0].top \n\n\n//#################condição de envio msg######################################\nif  (recirculaOn==1){\n    msgRecircula = \"Filtração 2 está em circulação\"\n}\n\nelse{\n    msgRecircula = -1\n}\n\nif ( recirculaOn==1 ){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\n \"+msgRecircula+\".\\n\")\n\treturn msg;\n}\n \n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":490,"y":280,"wires":[["e0dc1fb9.e839b"]]},{"id":"91bbab29.121308","type":"debug","z":"e428c615.0e1c58","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":500,"y":60,"wires":[]},{"id":"c5f10cc1.9f255","type":"influxdb in","z":"9a9a7718.e7e1a8","influxdb":"8e05a758.3df478","name":"recirculacao_filt1","query":"SELECT top(\"Filtracao1_recirculacao_hora\", 3) FROM \"Filtracao\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"Filtracao1_recirculacao_minutos\", 3) FROM \"Filtracao\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"Filtracao1_recir\", 3) FROM \"Filtracao\" WHERE time >= now() - 2m GROUP BY time(500ms) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":420,"wires":[["498733f9.f857ec"]]},{"id":"9aa85f6a.09842","type":"inject","z":"9a9a7718.e7e1a8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"180","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":110,"y":440,"wires":[["c5f10cc1.9f255","4a238073.662c5"]]},{"id":"498733f9.f857ec","type":"function","z":"9a9a7718.e7e1a8","name":"tempo_recic_fil1","func":"var recirMinutos_filt1=msg.payload[1][0].top\nvar recirHora_filt1=msg.payload[0][0].top\nvar recirculaOn_novo= 1//msg.payload[2][1].top\nvar recirculaOn_antigo= msg.payload[2][0].top\n//#################condição envio##################\n\nif       ((recirculaOn_novo!=recirculaOn_antigo ) && (recirMinutos_filt1 >=0 ) && (recirHora_filt1 >=0)){\n    filtra1 = \"O tempo de reciculação é da Filtração 1 é de \" + recirHora_filt1 + \":\"+recirMinutos_filt1+\"\"  \n     \n}\n\nif ( recirculaOn_novo==1 ){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\n \"+filtra1+\".\\n\")\n\treturn msg;\n}\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":520,"y":420,"wires":[["eec41f79.560d6"]]},{"id":"f7d546a2.717a98","type":"debug","z":"9a9a7718.e7e1a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.content","targetType":"msg","statusVal":"","statusType":"auto","x":960,"y":360,"wires":[]},{"id":"353b84be.1b1e5c","type":"function","z":"9a9a7718.e7e1a8","name":"tempo_recic_fil2","func":"var recirMinutos_filt2=msg.payload[1][0].top\nvar recirHora_filt2=msg.payload[0][0].top\nvar recirculaOn_novo= msg.payload[2][1].top\nvar recirculaOn_antigo= msg.payload[2][0].top\n\n//#################condição envio##################\n\nif       ((recirculaOn_novo !=recirculaOn_antigo ) && (recirMinutos_filt2 >=0 ) && (recirHora_filt2 >=0)){\n    filtra2 = \"O tempo de reciculação da Filtração 2 é de \" + recirHora_filt2 + \":\"+recirMinutos_filt2+\"\"  \n\n}\n\nif ( recirculaOn_novo==1 ){\n\tmsg.payload.type    = 'message'\n\tmsg.payload.chatId  = -796510825\n\tmsg.payload.content = (\"\\n \"+filtra2+\".\\n\")\n\treturn msg;\n}\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","x":520,"y":460,"wires":[["eec41f79.560d6"]]},{"id":"4a238073.662c5","type":"influxdb in","z":"9a9a7718.e7e1a8","influxdb":"8e05a758.3df478","name":"recirculacao_filt2","query":"SELECT top(\"Filtracao2_recirculacao_hora\", 3) FROM \"Filtracao\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"Filtracao2_recirculacao_min\", 3) FROM \"Filtracao\" WHERE time >= now() - 1m GROUP BY time(30s) fill(null);SELECT top(\"Filtracao2_recir\", 3) FROM \"Filtracao\" WHERE time >= now() - 2m GROUP BY time(500ms) fill(null)","rawOutput":false,"precision":"","retentionPolicy":"","x":290,"y":460,"wires":[["353b84be.1b1e5c"]]},{"id":"bc2286c7.1258a8","type":"debug","z":"9a9a7718.e7e1a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":130,"y":360,"wires":[]},{"id":"eec41f79.560d6","type":"telegram sender","z":"9a9a7718.e7e1a8","name":"Crab_Filtração","bot":"6991af64.21add","haserroroutput":false,"outputs":1,"x":740,"y":440,"wires":[["f7d546a2.717a98"]]}]